<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log Console Table - JaZeR CSS Patterns</title>
    <link rel="stylesheet" href="../../../jazer-brand.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-dark);
            color: var(--text-light);
            font-family: var(--font-body);
            min-height: 100vh;
            padding: 1.5rem;
            line-height: 1.6;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--jazer-cyan);
            text-decoration: none;
            font-family: var(--font-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            padding: 0.5rem 0;
            transition: gap 0.3s ease;
        }

        .back-button:hover {
            gap: 0.85rem;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 2rem 1.5rem;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.08) 0%, rgba(147, 51, 234, 0.08) 50%, rgba(236, 72, 153, 0.08) 100%);
            border-radius: 16px;
            border: 1px solid rgba(6, 182, 212, 0.2);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
        }

        .hero h1 {
            font-family: var(--font-primary);
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: 800;
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .hero-description {
            color: var(--text-gray);
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (min-width: 1000px) {
            .main-grid {
                grid-template-columns: 1fr 340px;
            }
        }

        /* Panel Styling */
        .panel {
            background: var(--bg-card);
            border: 2px solid var(--border-default);
            border-radius: 16px;
            padding: 1.5rem;
            transition: border-color 0.3s ease;
        }

        .panel:hover {
            border-color: rgba(6, 182, 212, 0.3);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-default);
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .panel-title {
            font-family: var(--font-secondary);
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--jazer-cyan);
        }

        .panel-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        /* Console Toolbar */
        .console-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            padding: 0.6rem 0.875rem;
            margin-bottom: 0.75rem;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .filter-pills {
            display: flex;
            gap: 0.35rem;
            flex-wrap: wrap;
        }

        .filter-pill {
            padding: 0.3rem 0.6rem;
            font-size: 0.65rem;
            font-family: var(--font-secondary);
            font-weight: 600;
            text-transform: uppercase;
            border-radius: 4px;
            border: 1px solid var(--border-default);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .filter-pill:hover {
            border-color: var(--text-gray);
            color: var(--text-gray);
        }

        .filter-pill.active {
            border-color: currentColor;
            background: currentColor;
            color: #000;
        }

        .filter-pill.all { color: var(--text-gray); }
        .filter-pill.all.active { background: var(--text-gray); }
        .filter-pill.info { color: var(--jazer-cyan); }
        .filter-pill.info.active { background: var(--jazer-cyan); }
        .filter-pill.warn { color: var(--jazer-yellow); }
        .filter-pill.warn.active { background: var(--jazer-yellow); }
        .filter-pill.error { color: var(--jazer-pink); }
        .filter-pill.error.active { background: var(--jazer-pink); }
        .filter-pill.debug { color: var(--jazer-purple); }
        .filter-pill.debug.active { background: var(--jazer-purple); }
        .filter-pill.success { color: #22c55e; }
        .filter-pill.success.active { background: #22c55e; }

        .pill-count {
            font-size: 0.6rem;
            opacity: 0.8;
        }

        .toolbar-actions {
            display: flex;
            gap: 0.35rem;
        }

        .toolbar-btn {
            width: 28px;
            height: 28px;
            border-radius: 4px;
            border: 1px solid var(--border-default);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }

        .toolbar-btn:hover {
            border-color: var(--jazer-cyan);
            color: var(--jazer-cyan);
        }

        .toolbar-btn.active {
            background: rgba(6, 182, 212, 0.2);
            border-color: var(--jazer-cyan);
            color: var(--jazer-cyan);
        }

        /* Console Container */
        .console-container {
            background: #0d0d0d;
            border: 2px solid #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
        }

        .console-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: #1a1a1a;
            border-bottom: 1px solid #2a2a2a;
        }

        .console-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .console-dot.red { background: #ff5f57; }
        .console-dot.yellow { background: #febc2e; }
        .console-dot.green { background: #28c840; }

        .console-title {
            flex: 1;
            text-align: center;
            font-size: 0.7rem;
            color: var(--text-muted);
            font-family: var(--font-secondary);
        }

        /* Log Table */
        .log-viewport {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--jazer-purple) transparent;
        }

        .log-viewport::-webkit-scrollbar {
            width: 6px;
        }

        .log-viewport::-webkit-scrollbar-track {
            background: transparent;
        }

        .log-viewport::-webkit-scrollbar-thumb {
            background: var(--jazer-purple);
            border-radius: 3px;
        }

        .log-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }

        .log-table th,
        .log-table td {
            padding: 0.5rem 0.75rem;
            text-align: left;
            border-bottom: 1px solid #1a1a1a;
            vertical-align: top;
        }

        .log-table th {
            background: #141414;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .log-table tbody tr {
            transition: background-color 0.15s ease;
        }

        .log-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        /* Log entry animation */
        .log-table tbody tr.new-entry {
            animation: logFlash 0.5s ease;
        }

        @keyframes logFlash {
            0% { background: rgba(6, 182, 212, 0.3); }
            100% { background: transparent; }
        }

        /* Timestamp column */
        .log-timestamp {
            color: #666;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        /* Level column */
        .log-level {
            font-weight: 700;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            display: inline-block;
            min-width: 50px;
            text-align: center;
        }

        .level-info {
            color: var(--jazer-cyan);
            background: rgba(6, 182, 212, 0.15);
        }

        .level-warn {
            color: var(--jazer-yellow);
            background: rgba(255, 190, 11, 0.15);
        }

        .level-error {
            color: var(--jazer-pink);
            background: rgba(236, 72, 153, 0.15);
        }

        .level-debug {
            color: var(--jazer-purple);
            background: rgba(147, 51, 234, 0.15);
        }

        .level-success {
            color: #22c55e;
            background: rgba(34, 197, 94, 0.15);
        }

        /* Message column */
        .log-message {
            color: #e0e0e0;
            word-break: break-word;
        }

        .log-message code {
            background: rgba(147, 51, 234, 0.2);
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
            font-size: 0.75rem;
            color: var(--jazer-purple);
        }

        /* Source column */
        .log-source {
            color: #666;
            font-size: 0.7rem;
            white-space: nowrap;
        }

        .log-source a {
            color: var(--jazer-purple);
            text-decoration: none;
        }

        .log-source a:hover {
            text-decoration: underline;
        }

        /* Row styles by level */
        .row-error {
            background: rgba(236, 72, 153, 0.05);
            border-left: 3px solid var(--jazer-pink);
        }

        .row-warn {
            background: rgba(255, 190, 11, 0.03);
        }

        /* Line numbers */
        .show-line-numbers .log-table td:first-child::before {
            content: attr(data-line);
            color: #444;
            font-size: 0.65rem;
            margin-right: 0.75rem;
            display: inline-block;
            min-width: 2rem;
            text-align: right;
        }

        /* Compact mode */
        .compact-mode .log-table th,
        .compact-mode .log-table td {
            padding: 0.35rem 0.5rem;
            font-size: 0.75rem;
        }

        .compact-mode .log-level {
            font-size: 0.6rem;
            padding: 0.15rem 0.35rem;
        }

        /* Controls Sidebar */
        .controls-sidebar {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* Accordion Controls */
        details {
            background: var(--bg-card);
            border: 2px solid var(--border-default);
            border-radius: 12px;
            overflow: hidden;
            transition: border-color 0.3s ease;
        }

        details:hover {
            border-color: rgba(147, 51, 234, 0.3);
        }

        details[open] {
            border-color: var(--jazer-purple);
        }

        summary {
            padding: 1rem 1.25rem;
            font-family: var(--font-secondary);
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            list-style: none;
            user-select: none;
            transition: background-color 0.2s ease;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::after {
            content: '+';
            font-size: 1.2rem;
            color: var(--jazer-purple);
            transition: transform 0.3s ease;
        }

        details[open] summary::after {
            content: '-';
        }

        summary:hover {
            background: rgba(147, 51, 234, 0.05);
        }

        .details-content {
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border-default);
        }

        /* Control Groups */
        .control-group {
            margin-bottom: 1rem;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: block;
            font-family: var(--font-secondary);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        /* Select Dropdown */
        .control-select {
            width: 100%;
            padding: 0.6rem 0.9rem;
            font-size: 0.85rem;
            font-family: var(--font-body);
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-default);
            border-radius: 8px;
            color: var(--text-light);
            cursor: pointer;
            transition: border-color 0.2s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2306b6d4' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
        }

        .control-select:hover,
        .control-select:focus {
            border-color: var(--jazer-cyan);
            outline: none;
        }

        .control-select option {
            background: #1a1a1a;
            color: var(--text-light);
        }

        /* Checkbox Toggle */
        .checkbox-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
        }

        .checkbox-toggle {
            position: relative;
            width: 44px;
            height: 24px;
            flex-shrink: 0;
        }

        .checkbox-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .checkbox-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-default);
            border-radius: 24px;
            transition: all 0.3s ease;
        }

        .checkbox-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: var(--text-gray);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .checkbox-toggle input:checked + .checkbox-slider {
            background: rgba(6, 182, 212, 0.2);
            border-color: var(--jazer-cyan);
        }

        .checkbox-toggle input:checked + .checkbox-slider::before {
            transform: translateX(20px);
            background: var(--jazer-cyan);
            box-shadow: 0 0 8px var(--jazer-cyan);
        }

        .checkbox-label {
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            font-family: var(--font-secondary);
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: 8px;
            border: 2px solid var(--border-default);
            background: transparent;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn:hover {
            border-color: var(--jazer-cyan);
            color: var(--jazer-cyan);
        }

        .btn-sm {
            padding: 0.4rem 0.75rem;
            font-size: 0.75rem;
        }

        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            color: white;
        }

        .btn-primary:hover {
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
            transform: translateY(-1px);
        }

        .btn-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        /* Data Preset Buttons */
        .preset-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .preset-btn {
            padding: 0.75rem 0.5rem;
            font-size: 0.75rem;
            text-align: center;
            border-radius: 8px;
            border: 2px solid var(--border-default);
            background: transparent;
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .preset-btn:hover {
            border-color: var(--jazer-purple);
            color: var(--jazer-purple);
            background: rgba(147, 51, 234, 0.1);
        }

        .preset-btn.active {
            border-color: var(--jazer-cyan);
            color: var(--jazer-cyan);
            background: rgba(6, 182, 212, 0.1);
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.2);
        }

        /* Status Bar */
        .status-bar {
            background: var(--bg-card);
            border: 2px solid var(--border-default);
            border-radius: 12px;
            padding: 0.875rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .status-info {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.75rem;
        }

        .status-item span:first-child {
            color: var(--text-muted);
            font-family: var(--font-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-item span:last-child {
            color: var(--jazer-cyan);
            font-weight: 600;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-gray);
        }

        .status-dot-indicator {
            width: 8px;
            height: 8px;
            background: var(--jazer-cyan);
            border-radius: 50%;
            animation: statusPulse 2s ease-in-out infinite;
        }

        .status-indicator.streaming .status-dot-indicator {
            background: #22c55e;
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .panel {
                padding: 1rem;
            }

            .preset-grid {
                grid-template-columns: 1fr;
            }

            .console-toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-pills {
                justify-content: center;
            }

            .toolbar-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">← Back to Data Visualization</a>

    <header class="hero">
        <h1>Log Console Table</h1>
        <p class="hero-description">Terminal-style log viewer with monospace typography, level filtering, and live streaming simulation for debugging interfaces.</p>
    </header>

    <div class="main-grid">
        <!-- Demo Area -->
        <div class="panel">
            <div class="panel-header">
                <span class="panel-title">Live Console</span>
                <div class="panel-actions">
                    <button class="btn btn-sm" onclick="clearLogs()">Clear</button>
                    <button class="btn btn-sm" id="streamBtn" onclick="toggleStream()">Start Stream</button>
                </div>
            </div>

            <!-- Console Toolbar -->
            <div class="console-toolbar">
                <div class="filter-pills">
                    <button class="filter-pill all active" onclick="setFilter('all')">All <span class="pill-count" id="countAll">0</span></button>
                    <button class="filter-pill info" onclick="setFilter('info')">Info <span class="pill-count" id="countInfo">0</span></button>
                    <button class="filter-pill warn" onclick="setFilter('warn')">Warn <span class="pill-count" id="countWarn">0</span></button>
                    <button class="filter-pill error" onclick="setFilter('error')">Error <span class="pill-count" id="countError">0</span></button>
                    <button class="filter-pill debug" onclick="setFilter('debug')">Debug <span class="pill-count" id="countDebug">0</span></button>
                    <button class="filter-pill success" onclick="setFilter('success')">Success <span class="pill-count" id="countSuccess">0</span></button>
                </div>
                <div class="toolbar-actions">
                    <button class="toolbar-btn" id="scrollBtn" onclick="toggleAutoScroll()" title="Auto-scroll">⬇️</button>
                    <button class="toolbar-btn" id="wrapBtn" onclick="toggleWordWrap()" title="Word wrap">↩️</button>
                </div>
            </div>

            <!-- Console -->
            <div class="console-container" id="consoleContainer">
                <div class="console-header">
                    <span class="console-dot red"></span>
                    <span class="console-dot yellow"></span>
                    <span class="console-dot green"></span>
                    <span class="console-title">system.log — bash</span>
                </div>
                <div class="log-viewport" id="logViewport">
                    <table class="log-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Level</th>
                                <th>Message</th>
                                <th>Source</th>
                            </tr>
                        </thead>
                        <tbody id="logBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Controls Sidebar -->
        <div class="controls-sidebar">
            <!-- Log Scenario -->
            <details open>
                <summary>Log Scenario</summary>
                <div class="details-content">
                    <div class="control-group">
                        <label class="control-label">Preset Logs</label>
                        <div class="preset-grid">
                            <button class="preset-btn active" data-preset="server" onclick="setLogPreset('server')">Server</button>
                            <button class="preset-btn" data-preset="api" onclick="setLogPreset('api')">API</button>
                            <button class="preset-btn" data-preset="database" onclick="setLogPreset('database')">Database</button>
                            <button class="preset-btn" data-preset="auth" onclick="setLogPreset('auth')">Auth</button>
                        </div>
                    </div>
                </div>
            </details>

            <!-- Stream Settings -->
            <details open>
                <summary>Stream Settings</summary>
                <div class="details-content">
                    <div class="control-group">
                        <label class="control-label">Stream Interval</label>
                        <select class="control-select" id="intervalSelect" onchange="updateInterval()">
                            <option value="500">Fast (500ms)</option>
                            <option value="1000" selected>Normal (1s)</option>
                            <option value="2000">Slow (2s)</option>
                            <option value="5000">Very Slow (5s)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Max Log Entries</label>
                        <select class="control-select" id="maxLogsSelect" onchange="updateMaxLogs()">
                            <option value="50">50 entries</option>
                            <option value="100" selected>100 entries</option>
                            <option value="200">200 entries</option>
                            <option value="500">500 entries</option>
                        </select>
                    </div>
                </div>
            </details>

            <!-- Display Options -->
            <details>
                <summary>Display Options</summary>
                <div class="details-content">
                    <div class="checkbox-row">
                        <label class="checkbox-toggle">
                            <input type="checkbox" id="compactToggle" onchange="toggleCompact()">
                            <span class="checkbox-slider"></span>
                        </label>
                        <span class="checkbox-label">Compact Mode</span>
                    </div>
                    <div class="checkbox-row">
                        <label class="checkbox-toggle">
                            <input type="checkbox" id="lineNumbersToggle" onchange="toggleLineNumbers()">
                            <span class="checkbox-slider"></span>
                        </label>
                        <span class="checkbox-label">Show Line Numbers</span>
                    </div>
                    <div class="checkbox-row">
                        <label class="checkbox-toggle">
                            <input type="checkbox" id="timestampToggle" checked onchange="toggleTimestamp()">
                            <span class="checkbox-slider"></span>
                        </label>
                        <span class="checkbox-label">Show Timestamps</span>
                    </div>
                    <div class="checkbox-row">
                        <label class="checkbox-toggle">
                            <input type="checkbox" id="sourceToggle" checked onchange="toggleSource()">
                            <span class="checkbox-slider"></span>
                        </label>
                        <span class="checkbox-label">Show Source</span>
                    </div>
                </div>
            </details>

            <!-- Actions -->
            <details>
                <summary>Actions</summary>
                <div class="details-content">
                    <div class="btn-group">
                        <button class="btn" onclick="addRandomLog()">Add Log</button>
                        <button class="btn" onclick="addBurstLogs()">Burst (10)</button>
                        <button class="btn btn-primary" onclick="resetDefaults()">Reset All</button>
                    </div>
                </div>
            </details>
        </div>
    </div>

    <!-- Status Bar -->
    <footer class="status-bar">
        <div class="status-info">
            <div class="status-item">
                <span>Logs:</span>
                <span id="statusLogs">0</span>
            </div>
            <div class="status-item">
                <span>Filter:</span>
                <span id="statusFilter">All</span>
            </div>
            <div class="status-item">
                <span>Visible:</span>
                <span id="statusVisible">0</span>
            </div>
            <div class="status-item">
                <span>Scenario:</span>
                <span id="statusScenario">Server</span>
            </div>
        </div>
        <div class="status-indicator" id="statusIndicator">
            <span class="status-dot-indicator"></span>
            <span id="statusText">Ready</span>
        </div>
    </footer>

    <script>
        // State Management
        const state = {
            logs: [],
            filter: 'all',
            logPreset: 'server',
            streamInterval: 1000,
            maxLogs: 100,
            isStreaming: false,
            autoScroll: true,
            wordWrap: false,
            compact: false,
            showLineNumbers: false,
            showTimestamp: true,
            showSource: true,
            streamTimer: null,
            lineCounter: 0
        };

        // Log message templates by scenario
        const logTemplates = {
            server: {
                info: [
                    'Server started on port 3000',
                    'Request received: GET /api/users',
                    'Response sent: 200 OK (45ms)',
                    'Static files served from /public',
                    'WebSocket connection established',
                    'Cache hit for route /api/config',
                    'Health check passed'
                ],
                warn: [
                    'High memory usage detected: 85%',
                    'Slow response time: 2.5s for /api/data',
                    'Rate limit approaching for IP 192.168.1.100',
                    'Deprecated API endpoint called: /v1/legacy',
                    'Connection pool running low'
                ],
                error: [
                    'Failed to connect to upstream server',
                    'Request timeout after 30000ms',
                    'Uncaught exception in route handler',
                    'SSL certificate validation failed',
                    'Out of memory error'
                ],
                debug: [
                    'Parsing request body: <code>{"user": "admin"}</code>',
                    'Middleware executed: authMiddleware',
                    'Route matched: /api/users/:id',
                    'Query params: <code>page=1&limit=10</code>'
                ],
                success: [
                    'Deployment completed successfully',
                    'All health checks passing',
                    'Database migration completed',
                    'Cache cleared and rebuilt'
                ]
            },
            api: {
                info: [
                    'API request: POST /auth/login',
                    'Token validated for user_123',
                    'Rate limit: 45/100 requests used',
                    'GraphQL query executed in 12ms',
                    'Webhook delivered to endpoint'
                ],
                warn: [
                    'Invalid token format received',
                    'API version v1 deprecated',
                    'Large payload received: 5.2MB',
                    'Retry attempt 2/3 for external API'
                ],
                error: [
                    'Authentication failed: invalid credentials',
                    'API quota exceeded for client_456',
                    'Malformed JSON in request body',
                    'External service unavailable: payments'
                ],
                debug: [
                    'Headers: <code>Authorization: Bearer ***</code>',
                    'Response time breakdown: db=5ms, logic=3ms',
                    'Cache key: <code>users:list:page1</code>'
                ],
                success: [
                    'User authentication successful',
                    'Payment processed: $149.99',
                    'Email sent to user@example.com'
                ]
            },
            database: {
                info: [
                    'Query executed: SELECT * FROM users (3ms)',
                    'Connection pool: 8/20 active',
                    'Index created on users.email',
                    'Transaction committed successfully',
                    'Backup started for production_db'
                ],
                warn: [
                    'Slow query detected: 1.5s execution time',
                    'Connection pool exhausted, waiting...',
                    'Table scan on large table: orders',
                    'Replication lag: 500ms'
                ],
                error: [
                    'Deadlock detected, transaction rolled back',
                    'Duplicate key error on users.email',
                    'Connection refused to replica',
                    'Query syntax error near <code>WHERE</code>'
                ],
                debug: [
                    'Query plan: Index Scan on users_pkey',
                    'Rows affected: 42',
                    'Lock acquired on table: sessions'
                ],
                success: [
                    'Migration applied: add_user_roles',
                    'Backup completed: 2.4GB',
                    'Index rebuild finished'
                ]
            },
            auth: {
                info: [
                    'Login attempt from IP 10.0.0.1',
                    'Session created for user admin',
                    'MFA code sent to +1***1234',
                    'Password reset requested',
                    'OAuth token refreshed'
                ],
                warn: [
                    'Failed login attempt: user not found',
                    'Session expired for user_789',
                    'Weak password detected',
                    'Suspicious login location: Unknown'
                ],
                error: [
                    'Too many failed login attempts',
                    'Invalid MFA code entered 3 times',
                    'Token revocation failed',
                    'OAuth provider error: Google'
                ],
                debug: [
                    'Password hash verified: bcrypt',
                    'Session TTL: 3600s',
                    'Role check: admin permissions'
                ],
                success: [
                    'User logged in successfully',
                    'Password changed',
                    'MFA enabled for account',
                    'Permission granted: write access'
                ]
            }
        };

        const sources = {
            server: ['server.js:45', 'router.js:128', 'middleware.js:67', 'app.js:12', 'handler.js:89'],
            api: ['api.js:34', 'controller.js:156', 'validator.js:23', 'service.js:78', 'client.js:45'],
            database: ['db.js:89', 'query.js:45', 'pool.js:23', 'migration.js:12', 'model.js:67'],
            auth: ['auth.js:123', 'session.js:45', 'token.js:78', 'mfa.js:34', 'oauth.js:56']
        };

        const presetLabels = {
            server: 'Server',
            api: 'API',
            database: 'Database',
            auth: 'Auth'
        };

        // DOM Elements
        const logBody = document.getElementById('logBody');
        const logViewport = document.getElementById('logViewport');
        const consoleContainer = document.getElementById('consoleContainer');

        // Initialize
        function init() {
            loadInitialLogs();
            updateCounts();
            updateStatusBar();
        }

        // Load initial logs
        function loadInitialLogs() {
            const levels = ['info', 'info', 'info', 'warn', 'error', 'debug', 'success', 'info', 'info', 'warn'];
            levels.forEach((level, i) => {
                setTimeout(() => addLog(level), i * 50);
            });
        }

        // Add a log entry
        function addLog(level = null) {
            const levels = ['info', 'warn', 'error', 'debug', 'success'];
            const weights = [40, 20, 15, 15, 10];
            
            if (!level) {
                const random = Math.random() * 100;
                let cumulative = 0;
                for (let i = 0; i < levels.length; i++) {
                    cumulative += weights[i];
                    if (random <= cumulative) {
                        level = levels[i];
                        break;
                    }
                }
            }

            const templates = logTemplates[state.logPreset][level];
            const message = templates[Math.floor(Math.random() * templates.length)];
            const sourceList = sources[state.logPreset];
            const source = sourceList[Math.floor(Math.random() * sourceList.length)];

            const log = {
                id: ++state.lineCounter,
                timestamp: new Date().toLocaleTimeString('en-US', { hour12: false }),
                level,
                message,
                source
            };

            state.logs.push(log);

            // Trim logs if exceeding max
            while (state.logs.length > state.maxLogs) {
                state.logs.shift();
            }

            renderLogs();
            updateCounts();
            updateStatusBar();

            if (state.autoScroll) {
                logViewport.scrollTop = logViewport.scrollHeight;
            }
        }

        // Add random log
        function addRandomLog() {
            addLog();
        }

        // Add burst of logs
        function addBurstLogs() {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => addLog(), i * 100);
            }
        }

        // Render logs
        function renderLogs() {
            const filteredLogs = state.filter === 'all' 
                ? state.logs 
                : state.logs.filter(log => log.level === state.filter);

            logBody.innerHTML = filteredLogs.map(log => `
                <tr class="${log.level === 'error' ? 'row-error' : log.level === 'warn' ? 'row-warn' : ''} new-entry" data-level="${log.level}">
                    <td class="log-timestamp" data-line="${log.id}" ${!state.showTimestamp ? 'style="display:none"' : ''}>${log.timestamp}</td>
                    <td><span class="log-level level-${log.level}">${log.level}</span></td>
                    <td class="log-message">${log.message}</td>
                    <td class="log-source" ${!state.showSource ? 'style="display:none"' : ''}><a href="#">${log.source}</a></td>
                </tr>
            `).join('');

            // Remove animation class after animation completes
            setTimeout(() => {
                document.querySelectorAll('.new-entry').forEach(row => {
                    row.classList.remove('new-entry');
                });
            }, 500);
        }

        // Update filter counts
        function updateCounts() {
            const counts = { all: state.logs.length, info: 0, warn: 0, error: 0, debug: 0, success: 0 };
            state.logs.forEach(log => counts[log.level]++);

            document.getElementById('countAll').textContent = counts.all;
            document.getElementById('countInfo').textContent = counts.info;
            document.getElementById('countWarn').textContent = counts.warn;
            document.getElementById('countError').textContent = counts.error;
            document.getElementById('countDebug').textContent = counts.debug;
            document.getElementById('countSuccess').textContent = counts.success;
        }

        // Set filter
        function setFilter(filter) {
            state.filter = filter;
            
            document.querySelectorAll('.filter-pill').forEach(pill => {
                pill.classList.toggle('active', pill.classList.contains(filter));
            });

            renderLogs();
            updateStatusBar();
        }

        // Clear logs
        function clearLogs() {
            state.logs = [];
            state.lineCounter = 0;
            renderLogs();
            updateCounts();
            updateStatusBar();
        }

        // Toggle stream
        function toggleStream() {
            state.isStreaming = !state.isStreaming;
            const btn = document.getElementById('streamBtn');
            const indicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');

            if (state.isStreaming) {
                btn.textContent = 'Stop Stream';
                btn.classList.add('btn-primary');
                indicator.classList.add('streaming');
                statusText.textContent = 'Streaming...';
                state.streamTimer = setInterval(() => addLog(), state.streamInterval);
            } else {
                btn.textContent = 'Start Stream';
                btn.classList.remove('btn-primary');
                indicator.classList.remove('streaming');
                statusText.textContent = 'Ready';
                clearInterval(state.streamTimer);
            }
        }

        // Toggle auto-scroll
        function toggleAutoScroll() {
            state.autoScroll = !state.autoScroll;
            document.getElementById('scrollBtn').classList.toggle('active', state.autoScroll);
        }

        // Toggle word wrap
        function toggleWordWrap() {
            state.wordWrap = !state.wordWrap;
            document.getElementById('wrapBtn').classList.toggle('active', state.wordWrap);
            document.querySelectorAll('.log-message').forEach(cell => {
                cell.style.whiteSpace = state.wordWrap ? 'normal' : 'nowrap';
            });
        }

        // Update Status Bar
        function updateStatusBar() {
            const filteredCount = state.filter === 'all' ? state.logs.length : state.logs.filter(l => l.level === state.filter).length;
            document.getElementById('statusLogs').textContent = state.logs.length;
            document.getElementById('statusFilter').textContent = state.filter.charAt(0).toUpperCase() + state.filter.slice(1);
            document.getElementById('statusVisible').textContent = filteredCount;
            document.getElementById('statusScenario').textContent = presetLabels[state.logPreset];
        }

        // Event Handlers
        function setLogPreset(preset) {
            state.logPreset = preset;
            
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.preset === preset);
            });
            
            updateStatusBar();
        }

        function updateInterval() {
            state.streamInterval = parseInt(document.getElementById('intervalSelect').value);
            if (state.isStreaming) {
                clearInterval(state.streamTimer);
                state.streamTimer = setInterval(() => addLog(), state.streamInterval);
            }
        }

        function updateMaxLogs() {
            state.maxLogs = parseInt(document.getElementById('maxLogsSelect').value);
        }

        function toggleCompact() {
            state.compact = document.getElementById('compactToggle').checked;
            consoleContainer.classList.toggle('compact-mode', state.compact);
        }

        function toggleLineNumbers() {
            state.showLineNumbers = document.getElementById('lineNumbersToggle').checked;
            consoleContainer.classList.toggle('show-line-numbers', state.showLineNumbers);
        }

        function toggleTimestamp() {
            state.showTimestamp = document.getElementById('timestampToggle').checked;
            renderLogs();
        }

        function toggleSource() {
            state.showSource = document.getElementById('sourceToggle').checked;
            renderLogs();
        }

        function resetDefaults() {
            // Stop streaming if active
            if (state.isStreaming) toggleStream();

            state.filter = 'all';
            state.logPreset = 'server';
            state.streamInterval = 1000;
            state.maxLogs = 100;
            state.autoScroll = true;
            state.wordWrap = false;
            state.compact = false;
            state.showLineNumbers = false;
            state.showTimestamp = true;
            state.showSource = true;

            // Reset UI
            document.getElementById('intervalSelect').value = '1000';
            document.getElementById('maxLogsSelect').value = '100';
            document.getElementById('compactToggle').checked = false;
            document.getElementById('lineNumbersToggle').checked = false;
            document.getElementById('timestampToggle').checked = true;
            document.getElementById('sourceToggle').checked = true;
            document.getElementById('scrollBtn').classList.remove('active');
            document.getElementById('wrapBtn').classList.remove('active');

            document.querySelectorAll('.filter-pill').forEach(pill => {
                pill.classList.toggle('active', pill.classList.contains('all'));
            });

            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.preset === 'server');
            });

            consoleContainer.classList.remove('compact-mode', 'show-line-numbers');

            clearLogs();
            loadInitialLogs();
        }

        // Initialize on load
        init();
    </script>
</body>
</html>
