<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Map Tooltip Popup - JaZeR Maps Patterns</title>
  <link rel="stylesheet" href="../../../jazer-brand.css">
  <style>
    *{box-sizing:border-box}
    body{font-family:var(--font-body);background:var(--bg-dark);color:var(--text-light);margin:0;padding:1.25rem}
    .back-button{display:inline-flex;align-items:center;gap:.5rem;color:var(--text-gray);text-decoration:none;font-family:var(--font-secondary);font-weight:600;padding:.5rem 1rem;border-radius:8px;border:1px solid var(--border-default);background:var(--bg-card)}
    .back-button:hover{border-color:var(--jazer-cyan);color:var(--jazer-cyan)}

    .hero{text-align:center;margin:1rem 0}
    .hero h1{font-size:clamp(1.75rem,3.5vw,2.5rem);background:var(--gradient-text);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero p{color:var(--text-gray);max-width:760px;margin:.4rem auto}

    .panel{max-width:900px;margin:0 auto;background:var(--bg-card);border-radius:12px;padding:1rem;border:2px solid var(--border-default)}
    .map-area{height:560px;border-radius:12px;border:1px solid var(--border-default);background:linear-gradient(90deg,rgba(0,0,0,0.35),rgba(0,0,0,0.45));position:relative;overflow:hidden}

    .marker{position:absolute;transform:translate(-50%,-50%);cursor:pointer}
    .tooltip{position:absolute;padding:.6rem .8rem;background:var(--bg-card);border:1px solid var(--border-default);border-radius:10px;min-width:220px;box-shadow:var(--shadow-card)}
    .tooltip .title{font-weight:700}
    .tooltip .meta{color:var(--text-gray);font-size:.85rem}
    .small{font-size:.85rem;color:var(--text-gray)}
  </style>
</head>
<body>
  <a href="index.html" class="back-button">‚Üê Back to Maps & Geolocation</a>
  <header class="hero">
    <h1>Map Tooltip Popup</h1>
    <p>Rich content popups with thumbnails, actions, and contextual data triggered on click or hover.</p>
  </header>

  <main class="panel">
    <div class="map-area" id="mapArea"></div>
  </main>

  <script>
    const mapArea = document.getElementById('mapArea');
    const places = [ {id:1,name:'Blue Moon',x:20,y:30,photo:'‚òï',desc:'Cozy caf√©',rating:4.5}, {id:2,name:'Sunrise Hotel',x:46,y:44,photo:'üè®',desc:'Beachside hotel',rating:4.2}, {id:3,name:'Market',x:70,y:60,photo:'üõí',desc:'Local market',rating:4.3} ];
    function render(){ mapArea.innerHTML=''; places.forEach(p=>{ const el = document.createElement('div'); el.className='marker'; el.style.left = p.x + '%'; el.style.top = p.y + '%'; el.innerHTML = `<div style='width:20px;height:20px;border-radius:50%;background:var(--jazer-pink);display:flex;align-items:center;justify-content:center;font-size:12px'>‚Ä¢</div>`; el.addEventListener('click', (ev)=> showTooltip(p, ev)); el.addEventListener('mouseenter', (ev)=> showTooltip(p, ev, { hover:true })); el.addEventListener('mouseleave', ()=> hideTooltip()); mapArea.appendChild(el); }); }

    let currentTooltip = null;
    function showTooltip(place, ev, opts={}){ hideTooltip(); const tp = document.createElement('div'); tp.className='tooltip'; tp.style.left = (place.x + 3) + '%'; tp.style.top = (place.y - 3) + '%'; tp.innerHTML = `<div style='display:flex;gap:.6rem;align-items:center'><div style='width:46px;height:46px;border-radius:8px;background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center'>${place.photo}</div><div><div class='title'>${place.name}</div><div class='meta'>${place.desc} ‚Ä¢ ${place.rating} ‚òÖ</div></div></div><div style='display:flex;gap:.5rem;margin-top:.45rem;justify-content:flex-end'><button class='btn-ghost' data-id='${place.id}'>Save</button><button class='btn' data-id='${place.id}'>Route</button></div>`; mapArea.appendChild(tp); currentTooltip = tp; }
    function hideTooltip(){ if(currentTooltip){ currentTooltip.remove(); currentTooltip = null; } }

    render();
    document.addEventListener('click', (e)=>{ if(!mapArea.contains(e.target)) hideTooltip(); });
  </script>
</body>
</html>