<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Search Bar - Navigation & Menus - JaZeR</title>
    <link rel="stylesheet" href="../../../jazer-brand.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 50%, #0a0a0a 100%);
            min-height: 100vh;
            padding: 2rem;
            color: #ffffff;
        }

        .back-button {
            display: inline-block;
            margin-bottom: 2rem;
            padding: 0.75rem 1.5rem;
            background: transparent;
            color: var(--jazer-cyan);
            text-decoration: none;
            border: 2px solid var(--jazer-cyan);
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            outline: none;
        }

        .back-button:hover,
        .back-button:focus {
            background: var(--jazer-cyan);
            color: #0a0a0a;
            transform: translateX(-5px);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            outline: 2px solid var(--jazer-cyan);
            outline-offset: 3px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            font-family: var(--font-primary);
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .description {
            color: #a0a0a0;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .demo-card {
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid var(--jazer-cyan);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            margin-bottom: 2rem;
        }

        /* Enhanced Search Bar Styles */
        .search-container {
            position: relative;
            margin-bottom: 2rem;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            padding: 0.5rem 1rem;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .search-bar:focus-within {
            border-color: var(--jazer-cyan);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .search-icon {
            color: rgba(255, 255, 255, 0.5);
            margin-right: 0.75rem;
            transition: all 0.3s ease;
        }

        .search-bar:focus-within .search-icon {
            color: var(--jazer-cyan);
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 1rem;
            font-family: var(--font-body);
            padding: 0.5rem 0;
            outline: none;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .search-button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .search-button:hover,
        .search-button:focus {
            color: var(--jazer-cyan);
            background: rgba(0, 255, 255, 0.1);
            outline: none;
        }

        /* Expandable Search Bar */
        .search-bar-expandable {
            display: flex;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            width: 60px;
            height: 44px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 22px;
            padding: 0 0.75rem;
            overflow: hidden;
            position: relative;
        }

        .search-bar-expandable::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--jazer-cyan), #b100ff, var(--jazer-purple), #00d9ff);
            z-index: -1;
            border-radius: 24px;
            animation: gradientShift 4s linear infinite;
            background-size: 400% 400%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .search-bar-expandable:focus-within::before,
        .search-bar-expandable.expanded::before {
            opacity: 0.7;
        }

        .search-bar-expandable.expanded {
            width: 300px;
            padding: 0 1rem;
        }

        .search-bar-expandable:focus-within {
            border-color: var(--jazer-cyan);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .search-icon-expandable {
            color: rgba(255, 255, 255, 0.5);
            margin-right: 0.5rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .search-bar-expandable:focus-within .search-icon-expandable {
            color: var(--jazer-cyan);
        }

        .search-input-expandable {
            flex: 1;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 1rem;
            font-family: var(--font-body);
            padding: 0.5rem 0;
            outline: none;
            opacity: 0;
            width: 0;
            transition: all 0.3s ease;
        }

        .search-bar-expandable.expanded .search-input-expandable {
            opacity: 1;
            width: auto;
        }

        .search-input-expandable::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid var(--jazer-cyan);
            border-radius: 12px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            margin-top: 0.5rem;
        }

        .search-results.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .search-result-item {
            padding: 1rem;
            border-bottom: 1px solid rgba(0, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover,
        .search-result-item:focus,
        .search-result-item.selected {
            background: rgba(0, 255, 255, 0.1);
            outline: none;
        }

        .search-result-item.selected {
            background: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .result-icon {
            color: var(--jazer-cyan);
            font-size: 1.2rem;
        }

        .result-text {
            flex: 1;
        }

        .result-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .result-description {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .search-result-item .result-category {
            font-size: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            color: rgba(255, 255, 255, 0.7);
        }

        .search-feedback {
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--jazer-cyan);
            border-radius: 8px;
            color: var(--jazer-cyan);
            font-size: 0.9rem;
        }

        .search-feedback.error {
            background: rgba(255, 51, 102, 0.1);
            border-color: #ff3366;
            color: #ff3366;
        }

        .search-feedback.success {
            background: rgba(57, 255, 20, 0.1);
            border-color: #39ff14;
            color: #39ff14;
        }

        .search-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .suggestion-tag {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: var(--jazer-cyan);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-tag:hover,
        .suggestion-tag:focus {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--jazer-cyan);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            outline: none;
        }

        .recent-searches {
            margin-top: 1.5rem;
        }

        .recent-searches h3 {
            color: var(--jazer-cyan);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .recent-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 6px;
        }

        .recent-item:hover,
        .recent-item:focus {
            background: rgba(0, 255, 255, 0.1);
            outline: none;
        }

        .recent-icon {
            color: var(--jazer-cyan);
        }

        .search-loading {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            display: none;
            color: var(--jazer-cyan);
            animation: pulse 1.5s infinite;
        }

        .search-loading.active {
            display: block;
        }

        .skeleton-option {
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            height: 60px;
            display: flex;
            align-items: center;
            gap: 1rem;
            border-radius: 8px;
        }

        .skeleton-icon {
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .skeleton-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .skeleton-line {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .skeleton-line:first-child {
            width: 70%;
        }

        .skeleton-line:last-child {
            width: 50%;
        }

        .empty-state {
            padding: 2rem;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
        }

        .empty-state-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .search-bar-expandable.expanded {
                width: 250px;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .search-bar,
            .search-bar-expandable,
            .search-results {
                border: 2px solid;
            }

            .search-result-item {
                border-bottom: 1px solid;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .search-bar-expandable,
            .search-input-expandable,
            .search-result-item {
                transition: none;
                animation: none;
            }
            
            .search-result-item.selected {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-button">‚Üê Back to Navigation</a>

        <h1>Enhanced Search Bar with Expandable Icon</h1>
        <p class="description">
            A modern search bar with expandable functionality, search suggestions, and real-time results.
            Features glass morphism design, keyboard navigation, and accessibility enhancements.
        </p>

        <div class="demo-card">
            <h3>Expandable Search Bar</h3>
            <div class="search-container">
                <div class="search-bar-expandable" id="expandableSearch" role="search" aria-label="Search components">
                    <span class="search-icon-expandable">üîç</span>
                    <input
                        type="text"
                        class="search-input-expandable"
                        id="searchInput"
                        placeholder="Search components..."
                        aria-label="Search for components"
                        autocomplete="off"
                    >
                    <div class="search-loading" id="searchLoading">‚è≥</div>
                </div>

                <div class="search-results" id="searchResults" role="listbox" aria-label="Search results">
                    <!-- Results will be populated dynamically -->
                </div>

                <div class="search-feedback" id="searchFeedback" style="display: none;">
                    <!-- Feedback messages will appear here -->
                </div>
            </div>

            <div class="recent-searches">
                <h3>Recent Searches</h3>
                <div class="recent-item" data-search="navigation">
                    <span class="recent-icon">üïí</span>
                    <span>navigation</span>
                </div>
                <div class="recent-item" data-search="buttons">
                    <span class="recent-icon">üïí</span>
                    <span>buttons</span>
                </div>
                <div class="recent-item" data-search="forms">
                    <span class="recent-icon">üïí</span>
                    <span>forms</span>
                </div>
            </div>

            <div class="search-suggestions">
                <h3>Suggested Searches:</h3>
                <div class="suggestion-tag" data-suggestion="navigation">Navigation</div>
                <div class="suggestion-tag" data-suggestion="buttons">Buttons</div>
                <div class="suggestion-tag" data-suggestion="forms">Forms</div>
                <div class="suggestion-tag" data-suggestion="animations">Animations</div>
                <div class="suggestion-tag" data-suggestion="ui patterns">UI Patterns</div>
            </div>
        </div>

        <div class="demo-card">
            <h3>Standard Search Bar</h3>
            <div class="search-container">
                <div class="search-bar" role="search" aria-label="Standard search">
                    <span class="search-icon">üîç</span>
                    <input
                        type="text"
                        class="search-input"
                        placeholder="Search..."
                        aria-label="Search for items"
                        autocomplete="off"
                    >
                    <button class="search-button" aria-label="Submit search">
                        <span>üîç</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class EnhancedSearchBar {
            constructor() {
                this.isExpanded = false;
                this.selectedIndex = -1;
                this.searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];
                this.searchTimeout = null;

                this.searchData = [
                    { id: 1, title: 'Navigation Bar', description: 'Responsive navigation component', category: 'Navigation', icon: 'üß≠' },
                    { id: 2, title: 'Button Component', description: 'Stylish button with hover effects', category: 'Buttons', icon: 'üîò' },
                    { id: 3, title: 'Form Input', description: 'Modern input fields with validation', category: 'Forms', icon: 'üìù' },
                    { id: 4, title: 'Modal Dialog', description: 'Popup modal with smooth animations', category: 'UI Patterns', icon: 'üì¶' },
                    { id: 5, title: 'Card Layout', description: 'Responsive card component', category: 'Layout', icon: 'üÉè' },
                    { id: 6, title: 'Progress Bar', description: 'Animated progress indicator', category: 'Indicators', icon: 'üìä' },
                    { id: 7, title: 'Dropdown Menu', description: 'Custom dropdown with animations', category: 'Navigation', icon: 'üìÅ' },
                    { id: 8, title: 'Toggle Switch', description: 'Modern toggle switch component', category: 'Forms', icon: 'üîõ' },
                    { id: 9, title: 'Avatar Component', description: 'User avatar with status indicator', category: 'UI Patterns', icon: 'üë§' },
                    { id: 10, title: 'Badge Component', description: 'Notification badges and labels', category: 'UI Patterns', icon: 'üè∑Ô∏è' },
                    { id: 11, title: 'Slider Component', description: 'Range slider with custom styling', category: 'Forms', icon: 'üéöÔ∏è' },
                    { id: 12, title: 'Tooltip', description: 'Interactive tooltip component', category: 'UI Patterns', icon: 'üí°' },
                    { id: 13, title: 'Command Palette', description: 'Advanced command execution interface', category: 'Navigation', icon: '‚å®Ô∏è' },
                    { id: 14, title: 'Search Bar', description: 'Enhanced search functionality', category: 'Navigation', icon: 'üîç' },
                    { id: 15, title: 'Autocomplete', description: 'Smart input with suggestions', category: 'Forms', icon: 'üìã' },
                    { id: 16, title: 'Pagination', description: 'Page navigation controls', category: 'Navigation', icon: '-pagination' },
                    { id: 17, title: 'Tabs', description: 'Tabbed interface component', category: 'Navigation', icon: 'üóÇÔ∏è' },
                    { id: 18, title: 'Accordion', description: 'Collapsible content sections', category: 'Navigation', icon: ' accordion' }
                ];

                this.init();
            }

            init() {
                this.expandableSearch = document.getElementById('expandableSearch');
                this.searchInput = document.getElementById('searchInput');
                this.searchResults = document.getElementById('searchResults');
                this.searchFeedback = document.getElementById('searchFeedback');
                this.searchLoading = document.getElementById('searchLoading');

                // Event listeners
                this.expandableSearch.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('search-input-expandable')) {
                        this.toggleExpand();
                    }
                });

                this.searchInput.addEventListener('input', (e) => {
                    // Debounce search to improve performance
                    clearTimeout(this.searchTimeout);
                    this.searchTimeout = setTimeout(() => {
                        this.handleSearch(e.target.value);
                    }, 300);
                });
                
                this.searchInput.addEventListener('keydown', (e) => this.handleKeydown(e));

                // Add event listeners to suggestion tags
                document.querySelectorAll('.suggestion-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        const suggestion = e.target.getAttribute('data-suggestion');
                        this.searchInput.value = suggestion;
                        this.handleSearch(suggestion);
                    });
                });

                // Add event listeners to recent searches
                document.querySelectorAll('.recent-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const search = e.target.getAttribute('data-search') || e.target.closest('.recent-item').getAttribute('data-search');
                        this.searchInput.value = search;
                        this.handleSearch(search);
                    });
                });

                // Close results when clicking outside
                document.addEventListener('click', (e) => {
                    if (!this.expandableSearch.contains(e.target) && !this.searchResults.contains(e.target)) {
                        this.hideResults();
                    }
                });
            }

            toggleExpand() {
                this.isExpanded = !this.isExpanded;
                if (this.isExpanded) {
                    this.expandableSearch.classList.add('expanded');
                    this.searchInput.focus();
                } else {
                    if (!this.searchInput.value) {
                        this.expandableSearch.classList.remove('expanded');
                    }
                }
            }

            handleSearch(query) {
                if (!query.trim()) {
                    this.hideResults();
                    this.clearFeedback();
                    return;
                }

                // Show loading indicator
                this.searchLoading.classList.add('active');

                // Simulate async search for better UX
                setTimeout(() => {
                    const results = this.searchData.filter(item =>
                        item.title.toLowerCase().includes(query.toLowerCase()) ||
                        item.description.toLowerCase().includes(query.toLowerCase()) ||
                        item.category.toLowerCase().includes(query.toLowerCase())
                    );

                    if (results.length > 0) {
                        this.showResults(results);
                        this.showFeedback(`${results.length} results found for "${query}"`, 'success');
                    } else {
                        this.showEmptyState();
                        this.showFeedback(`No results found for "${query}"`, 'error');
                    }

                    // Hide loading indicator
                    this.searchLoading.classList.remove('active');

                    // Add to search history
                    this.addToSearchHistory(query);
                }, 300);
            }

            showResults(results) {
                this.searchResults.innerHTML = results.map((item, index) => `
                    <div
                        class="search-result-item"
                        data-id="${item.id}"
                        role="option"
                        aria-selected="${index === this.selectedIndex}"
                        tabindex="-1"
                    >
                        <span class="result-icon">${item.icon}</span>
                        <div class="result-text">
                            <div class="result-title">${item.title}</div>
                            <div class="result-description">${item.description}</div>
                        </div>
                        <div class="result-category">${item.category}</div>
                    </div>
                `).join('');

                // Add event listeners to results
                this.searchResults.querySelectorAll('.search-result-item').forEach((item, index) => {
                    item.addEventListener('click', () => this.selectResult(item));
                    item.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            this.selectResult(item);
                        }
                    });
                });

                this.searchResults.classList.add('active');
                this.selectedIndex = -1;
            }

            showEmptyState() {
                this.searchResults.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <div>No results found</div>
                        <div class="result-description">Try a different search term</div>
                    </div>
                `;
                this.searchResults.classList.add('active');
                this.selectedIndex = -1;
            }

            hideResults() {
                this.searchResults.classList.remove('active');
                this.selectedIndex = -1;
            }

            handleKeydown(e) {
                if (!this.searchResults.classList.contains('active')) return;

                const results = this.searchResults.querySelectorAll('.search-result-item');
                if (results.length === 0) return;

                switch(e.key) {
                    case 'ArrowDown':
                        e.preventDefault();
                        this.moveSelection(1, results);
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        this.moveSelection(-1, results);
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (this.selectedIndex >= 0) {
                            this.selectResult(results[this.selectedIndex]);
                        }
                        break;
                    case 'Escape':
                        e.preventDefault();
                        this.hideResults();
                        break;
                    case 'Home':
                        e.preventDefault();
                        this.moveSelectionToStart(results);
                        break;
                    case 'End':
                        e.preventDefault();
                        this.moveSelectionToEnd(results);
                        break;
                }
            }

            moveSelection(direction, results) {
                const total = results.length;
                if (total === 0) return;

                this.selectedIndex = (this.selectedIndex + direction + total) % total;
                this.updateSelection(results);
            }

            moveSelectionToStart(results) {
                this.selectedIndex = 0;
                this.updateSelection(results);
            }

            moveSelectionToEnd(results) {
                this.selectedIndex = results.length - 1;
                this.updateSelection(results);
            }

            updateSelection(results) {
                results.forEach((result, index) => {
                    if (index === this.selectedIndex) {
                        result.classList.add('selected');
                        result.setAttribute('aria-selected', 'true');
                        result.focus();
                    } else {
                        result.classList.remove('selected');
                        result.setAttribute('aria-selected', 'false');
                    }
                });
            }

            selectResult(resultElement) {
                const id = resultElement.getAttribute('data-id');
                const item = this.searchData.find(item => item.id == id);

                if (item) {
                    console.log(`Selected: ${item.title}`);
                    // In a real app, you would navigate to the selected item
                    this.hideResults();
                    this.showFeedback(`Selected: ${item.title}`, 'success');

                    // Add to search history
                    this.addToSearchHistory(this.searchInput.value);
                }
            }

            showFeedback(message, type = 'default') {
                this.searchFeedback.textContent = message;
                this.searchFeedback.className = 'search-feedback';
                this.searchFeedback.classList.add(type);
                this.searchFeedback.style.display = 'block';

                // Auto-hide success messages after 3 seconds
                if (type === 'success') {
                    setTimeout(() => {
                        this.clearFeedback();
                    }, 3000);
                }
            }

            clearFeedback() {
                this.searchFeedback.style.display = 'none';
            }

            addToSearchHistory(query) {
                // Remove existing entry if it exists
                this.searchHistory = this.searchHistory.filter(item => item !== query);

                // Add new query to beginning
                this.searchHistory.unshift(query);

                // Keep only last 5 searches
                this.searchHistory = this.searchHistory.slice(0, 5);

                // Save to localStorage
                localStorage.setItem('searchHistory', JSON.stringify(this.searchHistory));
            }
        }

        // Initialize enhanced search bar when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new EnhancedSearchBar();
        });
    </script>
</body>
</html>