<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Points Multiplier Flash</title>
    <link rel="stylesheet" href="../../../jazer-brand.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: var(--font-body); 
            background: var(--bg-dark); 
            color: var(--text-light); 
            padding: 2rem;
            min-height: 100vh;
        }
        
        h1 { 
            background: var(--gradient-text); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            margin-bottom: 0.5rem; 
            font-size: 2.5rem; 
        }
        
        .subtitle {
            color: var(--text-muted);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }
        
        .back-button { 
            display: inline-block; 
            color: var(--jazer-cyan); 
            text-decoration: none; 
            font-weight: 600; 
            padding: 0.75rem 1.5rem; 
            border-radius: 12px; 
            border: 2px solid var(--jazer-cyan); 
            background: rgba(6, 182, 212, 0.1); 
            margin-bottom: 2rem; 
            transition: all 0.3s ease; 
        }
        
        .back-button:hover { 
            background: var(--jazer-cyan); 
            color: var(--bg-dark); 
            transform: translateX(-5px); 
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.5); 
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .control-group label {
            font-size: 0.85rem;
            color: var(--jazer-cyan);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .control-group select {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid var(--jazer-purple);
            color: var(--text-light);
            padding: 0.6rem 1rem;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 160px;
        }
        
        .control-group select:hover {
            border-color: var(--jazer-cyan);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
        }
        
        .trigger-btn {
            background: linear-gradient(135deg, var(--jazer-cyan), var(--jazer-purple));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(6, 182, 212, 0.4);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .trigger-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.6);
        }
        
        .demo-container {
            position: relative;
            border: 2px solid var(--jazer-pink);
            border-radius: 16px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(15, 15, 35, 0.9), rgba(30, 20, 50, 0.9));
            min-height: 450px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        /* Score display */
        .score-section {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .score-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 0.5rem;
        }
        
        .score-display {
            font-size: 3rem;
            font-weight: 900;
            font-family: var(--font-primary);
            color: white;
            text-shadow: 0 0 20px rgba(255,255,255,0.3);
        }
        
        /* Multiplier display */
        .multiplier-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .multiplier-badge {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.3), rgba(0, 242, 234, 0.3));
            border: 4px solid var(--jazer-purple);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .multiplier-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(147, 51, 234, 0.5);
        }
        
        .multiplier-inner {
            position: relative;
            z-index: 2;
            text-align: center;
        }
        
        .multiplier-x {
            font-size: 1.2rem;
            color: var(--jazer-cyan);
            font-weight: 600;
            letter-spacing: 0.1em;
        }
        
        .multiplier-value {
            font-size: 4rem;
            font-weight: 900;
            font-family: var(--font-primary);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }
        
        .multiplier-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }
        
        /* Multiplier ring */
        .multiplier-ring {
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 3px solid transparent;
            border-radius: 50%;
            border-top-color: var(--jazer-cyan);
            border-right-color: var(--jazer-pink);
            animation: ringRotate 3s linear infinite;
        }
        
        @keyframes ringRotate {
            to { transform: rotate(360deg); }
        }
        
        /* Flash overlay */
        .flash-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            opacity: 0;
            z-index: 10;
        }
        
        /* Flash styles */
        .flash-overlay.flash-burst {
            background: radial-gradient(circle at center, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(0, 242, 234, 0.6) 30%, 
                transparent 70%);
        }
        
        .flash-overlay.flash-golden {
            background: radial-gradient(circle at center, 
                rgba(255, 215, 0, 0.9) 0%, 
                rgba(255, 165, 0, 0.6) 30%, 
                transparent 70%);
        }
        
        .flash-overlay.flash-rainbow {
            background: conic-gradient(from 0deg at 50% 50%,
                rgba(255, 0, 0, 0.7),
                rgba(255, 165, 0, 0.7),
                rgba(255, 255, 0, 0.7),
                rgba(0, 255, 0, 0.7),
                rgba(0, 242, 234, 0.7),
                rgba(147, 51, 234, 0.7),
                rgba(255, 0, 110, 0.7),
                rgba(255, 0, 0, 0.7));
        }
        
        .flash-overlay.flash-electric {
            background: radial-gradient(circle at center,
                rgba(0, 242, 234, 0.9) 0%,
                rgba(0, 150, 255, 0.6) 30%,
                transparent 70%);
        }
        
        .flash-overlay.flash-fire {
            background: radial-gradient(circle at center,
                rgba(255, 255, 255, 0.9) 0%,
                rgba(255, 100, 0, 0.7) 20%,
                rgba(255, 0, 0, 0.5) 40%,
                transparent 70%);
        }
        
        .flash-overlay.flash-cosmic {
            background: radial-gradient(circle at center,
                rgba(255, 255, 255, 0.9) 0%,
                rgba(147, 51, 234, 0.7) 20%,
                rgba(255, 0, 110, 0.5) 40%,
                transparent 70%);
        }
        
        .flash-overlay.active {
            animation: flashPulse 0.6s ease-out forwards;
        }
        
        @keyframes flashPulse {
            0% { opacity: 1; transform: scale(0.5); }
            50% { opacity: 0.8; transform: scale(1.2); }
            100% { opacity: 0; transform: scale(1.5); }
        }
        
        /* Multiplier animation states */
        .multiplier-badge.activating {
            animation: multiplierActivate 0.6s ease-out;
        }
        
        @keyframes multiplierActivate {
            0% { transform: scale(1); }
            30% { transform: scale(1.3); }
            50% { transform: scale(0.9); }
            70% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }
        
        /* Particle effects */
        .particle-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 5;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
        }
        
        .particle.active {
            animation: particleBurst 1s ease-out forwards;
        }
        
        @keyframes particleBurst {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }
        
        /* Lightning effects */
        .lightning-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 6;
        }
        
        .lightning {
            position: absolute;
            stroke: var(--jazer-cyan);
            stroke-width: 3;
            fill: none;
            filter: drop-shadow(0 0 5px var(--jazer-cyan)) drop-shadow(0 0 10px var(--jazer-cyan));
            opacity: 0;
        }
        
        .lightning.active {
            animation: lightningFlash 0.3s ease-out forwards;
        }
        
        @keyframes lightningFlash {
            0%, 100% { opacity: 0; }
            10%, 30%, 50% { opacity: 1; }
            20%, 40% { opacity: 0.3; }
        }
        
        /* Shockwave */
        .shockwave {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 4px solid var(--jazer-cyan);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            z-index: 4;
        }
        
        .shockwave.active {
            animation: shockwaveExpand 0.8s ease-out forwards;
        }
        
        @keyframes shockwaveExpand {
            0% {
                width: 100px;
                height: 100px;
                opacity: 1;
                border-width: 4px;
            }
            100% {
                width: 600px;
                height: 600px;
                opacity: 0;
                border-width: 1px;
            }
        }
        
        /* Floating text */
        .floating-text {
            position: absolute;
            font-size: 2rem;
            font-weight: 900;
            color: var(--jazer-cyan);
            text-shadow: 0 0 20px var(--jazer-cyan);
            pointer-events: none;
            opacity: 0;
            z-index: 15;
        }
        
        .floating-text.active {
            animation: floatUp 1.5s ease-out forwards;
        }
        
        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translateY(-30px) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateY(-80px) scale(1);
            }
        }
        
        /* Points indicator */
        .points-gained {
            position: absolute;
            top: 20%;
            font-size: 1.5rem;
            font-weight: 700;
            color: #00ff88;
            text-shadow: 0 0 15px #00ff88;
            opacity: 0;
            z-index: 15;
        }
        
        .points-gained.active {
            animation: pointsPopup 1s ease-out forwards;
        }
        
        @keyframes pointsPopup {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.5);
            }
            30% {
                opacity: 1;
                transform: translateY(0) scale(1.1);
            }
            100% {
                opacity: 0;
                transform: translateY(-40px) scale(1);
            }
        }
        
        /* Streak indicator */
        .streak-bar {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .streak-segment {
            width: 40px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .streak-segment.filled {
            background: linear-gradient(90deg, var(--jazer-cyan), var(--jazer-purple));
            box-shadow: 0 0 10px var(--jazer-cyan);
        }
        
        .streak-segment.filled.pulse {
            animation: streakPulse 0.5s ease-out;
        }
        
        @keyframes streakPulse {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }
        
        /* Multiplier preset cards */
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .preset-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--jazer-purple);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .preset-card:hover {
            border-color: var(--jazer-cyan);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
        }
        
        .preset-card h3 {
            color: var(--jazer-pink);
            font-size: 1rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .preset-card .multiplier-preview {
            font-size: 2.5rem;
            font-weight: 900;
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .preset-card p {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }
        
        .keyboard-hint {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--jazer-purple);
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .keyboard-hint kbd {
            background: var(--jazer-purple);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: var(--font-primary);
            margin: 0 0.25rem;
        }
        
        /* Screen shake */
        .demo-container.shaking {
            animation: screenShake 0.4s ease-out;
        }
        
        @keyframes screenShake {
            0%, 100% { transform: translate(0, 0); }
            20% { transform: translate(-5px, 3px); }
            40% { transform: translate(5px, -3px); }
            60% { transform: translate(-3px, 2px); }
            80% { transform: translate(3px, -2px); }
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .controls { flex-direction: column; align-items: stretch; }
            .control-group select { min-width: 100%; }
            .multiplier-badge { width: 140px; height: 140px; }
            .multiplier-value { font-size: 3rem; }
            .keyboard-hint { display: none; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">‚Üê Back</a>
    <h1>Points Multiplier Flash</h1>
    <p class="subtitle">Explosive visual feedback for score multiplier activations</p>
    
    <div class="controls">
        <div class="control-group">
            <label>Flash Style</label>
            <select id="flashStyle">
                <option value="burst">Energy Burst</option>
                <option value="golden">Golden Glow</option>
                <option value="rainbow">Rainbow</option>
                <option value="electric">Electric</option>
                <option value="fire">Fire</option>
                <option value="cosmic">Cosmic</option>
            </select>
        </div>
        <div class="control-group">
            <label>Multiplier</label>
            <select id="multiplierValue">
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="4">4x</option>
                <option value="5" selected>5x</option>
                <option value="10">10x</option>
                <option value="100">100x</option>
            </select>
        </div>
        <div class="control-group">
            <label>Intensity</label>
            <select id="intensity">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
                <option value="extreme">Extreme</option>
            </select>
        </div>
        <button class="trigger-btn" onclick="activateMultiplier()">Activate Multiplier</button>
    </div>
    
    <div class="demo-container" id="demoContainer">
        <div class="flash-overlay" id="flashOverlay"></div>
        <div class="shockwave" id="shockwave"></div>
        <div class="particle-container" id="particleContainer"></div>
        <svg class="lightning-container" id="lightningContainer"></svg>
        
        <div class="score-section">
            <div class="score-label">Score</div>
            <div class="score-display" id="scoreDisplay">125,000</div>
        </div>
        
        <div class="multiplier-container">
            <div class="multiplier-badge" id="multiplierBadge" onclick="activateMultiplier()">
                <div class="multiplier-ring"></div>
                <div class="multiplier-inner">
                    <div class="multiplier-x">MULTIPLIER</div>
                    <div class="multiplier-value" id="multiplierDisplay">1x</div>
                    <div class="multiplier-label">tap to activate</div>
                </div>
            </div>
        </div>
        
        <div class="streak-bar" id="streakBar">
            <div class="streak-segment"></div>
            <div class="streak-segment"></div>
            <div class="streak-segment"></div>
            <div class="streak-segment"></div>
            <div class="streak-segment"></div>
        </div>
    </div>
    
    <div class="preset-grid">
        <div class="preset-card" onclick="triggerPreset('burst', 2, 'low')">
            <h3>Double Points</h3>
            <div class="multiplier-preview">2x</div>
            <p>Quick energy burst</p>
        </div>
        <div class="preset-card" onclick="triggerPreset('golden', 5, 'medium')">
            <h3>Golden Hour</h3>
            <div class="multiplier-preview">5x</div>
            <p>Golden glow effect</p>
        </div>
        <div class="preset-card" onclick="triggerPreset('rainbow', 10, 'high')">
            <h3>Rainbow Rush</h3>
            <div class="multiplier-preview">10x</div>
            <p>Colorful explosion</p>
        </div>
        <div class="preset-card" onclick="triggerPreset('electric', 3, 'medium')">
            <h3>Electric Surge</h3>
            <div class="multiplier-preview">3x</div>
            <p>Lightning effects</p>
        </div>
        <div class="preset-card" onclick="triggerPreset('fire', 4, 'high')">
            <h3>Fire Frenzy</h3>
            <div class="multiplier-preview">4x</div>
            <p>Blazing intensity</p>
        </div>
        <div class="preset-card" onclick="triggerPreset('cosmic', 100, 'extreme')">
            <h3>Cosmic Jackpot</h3>
            <div class="multiplier-preview">100x</div>
            <p>Maximum overdrive</p>
        </div>
    </div>
    
    <div class="keyboard-hint">
        Press <kbd>Space</kbd> to activate multiplier
    </div>
    
    <script>
        let isAnimating = false;
        let currentScore = 125000;
        let streakCount = 0;
        
        const flashColors = {
            burst: ['#00f2ea', '#9333ea', '#ffffff'],
            golden: ['#ffd700', '#ffa500', '#ffff00'],
            rainbow: ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'],
            electric: ['#00f2ea', '#00aaff', '#ffffff'],
            fire: ['#ff4500', '#ff6600', '#ffcc00'],
            cosmic: ['#9333ea', '#ff006e', '#00f2ea']
        };
        
        function createParticles(style, intensity) {
            const container = document.getElementById('particleContainer');
            container.innerHTML = '';
            
            const counts = { low: 15, medium: 30, high: 50, extreme: 80 };
            const count = counts[intensity];
            const colors = flashColors[style];
            
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = 4 + Math.random() * 12;
                const angle = (i / count) * Math.PI * 2 + Math.random() * 0.5;
                const distance = 100 + Math.random() * 200;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.boxShadow = `0 0 ${size}px ${particle.style.background}`;
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                particle.style.animationDelay = (Math.random() * 0.2) + 's';
                particle.style.animationDuration = (0.6 + Math.random() * 0.6) + 's';
                
                container.appendChild(particle);
                setTimeout(() => particle.classList.add('active'), 10);
            }
        }
        
        function createLightning(intensity) {
            const container = document.getElementById('lightningContainer');
            container.innerHTML = '';
            
            const counts = { low: 2, medium: 4, high: 6, extreme: 10 };
            const count = counts[intensity];
            
            for (let i = 0; i < count; i++) {
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                
                // Generate zigzag lightning path
                const startX = 50 + Math.random() * (container.clientWidth || 600);
                const startY = 0;
                const endX = 200 + Math.random() * 200;
                const endY = container.clientHeight || 400;
                
                let path = `M${startX} ${startY}`;
                let x = startX;
                let y = startY;
                const segments = 8 + Math.floor(Math.random() * 5);
                const stepY = endY / segments;
                
                for (let j = 0; j < segments; j++) {
                    x += (Math.random() - 0.5) * 80;
                    y += stepY;
                    path += ` L${x} ${y}`;
                }
                
                svg.setAttribute('d', path);
                svg.classList.add('lightning');
                svg.style.animationDelay = (Math.random() * 0.2) + 's';
                
                container.appendChild(svg);
                setTimeout(() => svg.classList.add('active'), 10);
            }
        }
        
        function createFloatingText(multiplier) {
            const container = document.getElementById('demoContainer');
            const text = document.createElement('div');
            text.className = 'floating-text';
            text.textContent = `${multiplier}x ACTIVATED!`;
            text.style.left = '50%';
            text.style.top = '30%';
            text.style.transform = 'translateX(-50%)';
            
            container.appendChild(text);
            setTimeout(() => text.classList.add('active'), 10);
            setTimeout(() => text.remove(), 1500);
        }
        
        function createPointsGained(multiplier) {
            const container = document.getElementById('demoContainer');
            const basePoints = 1000 + Math.floor(Math.random() * 5000);
            const totalPoints = basePoints * multiplier;
            
            const text = document.createElement('div');
            text.className = 'points-gained';
            text.textContent = `+${totalPoints.toLocaleString()} pts`;
            text.style.left = (30 + Math.random() * 40) + '%';
            
            container.appendChild(text);
            setTimeout(() => text.classList.add('active'), 100);
            setTimeout(() => text.remove(), 1100);
            
            // Update score
            currentScore += totalPoints;
            animateScore();
        }
        
        function animateScore() {
            const display = document.getElementById('scoreDisplay');
            const targetScore = currentScore;
            const startScore = parseInt(display.textContent.replace(/,/g, ''));
            const diff = targetScore - startScore;
            const duration = 500;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3);
                const current = Math.floor(startScore + diff * eased);
                display.textContent = current.toLocaleString();
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            
            requestAnimationFrame(update);
        }
        
        function updateStreak() {
            const segments = document.querySelectorAll('.streak-segment');
            streakCount = Math.min(streakCount + 1, 5);
            
            segments.forEach((seg, i) => {
                if (i < streakCount) {
                    seg.classList.add('filled');
                    if (i === streakCount - 1) {
                        seg.classList.add('pulse');
                        setTimeout(() => seg.classList.remove('pulse'), 500);
                    }
                }
            });
            
            // Reset streak after 5
            if (streakCount >= 5) {
                setTimeout(() => {
                    segments.forEach(seg => seg.classList.remove('filled'));
                    streakCount = 0;
                }, 2000);
            }
        }
        
        function activateMultiplier() {
            if (isAnimating) return;
            isAnimating = true;
            
            const style = document.getElementById('flashStyle').value;
            const multiplier = parseInt(document.getElementById('multiplierValue').value);
            const intensity = document.getElementById('intensity').value;
            
            const container = document.getElementById('demoContainer');
            const flash = document.getElementById('flashOverlay');
            const shockwave = document.getElementById('shockwave');
            const badge = document.getElementById('multiplierBadge');
            const display = document.getElementById('multiplierDisplay');
            
            // Update display
            display.textContent = multiplier + 'x';
            
            // Badge animation
            badge.classList.add('activating');
            
            // Screen shake for high intensity
            if (intensity === 'high' || intensity === 'extreme') {
                container.classList.add('shaking');
            }
            
            // Flash overlay
            flash.className = 'flash-overlay flash-' + style;
            flash.classList.add('active');
            
            // Shockwave
            shockwave.classList.add('active');
            
            // Create particles
            createParticles(style, intensity);
            
            // Create lightning for electric style
            if (style === 'electric' || intensity === 'extreme') {
                createLightning(intensity);
            }
            
            // Floating text
            createFloatingText(multiplier);
            
            // Points gained
            setTimeout(() => createPointsGained(multiplier), 300);
            
            // Update streak
            updateStreak();
            
            // Add multiple shockwaves for extreme
            if (intensity === 'extreme') {
                for (let i = 1; i <= 3; i++) {
                    setTimeout(() => {
                        const extraWave = document.createElement('div');
                        extraWave.className = 'shockwave active';
                        container.appendChild(extraWave);
                        setTimeout(() => extraWave.remove(), 800);
                    }, i * 150);
                }
            }
            
            // Cleanup
            setTimeout(() => {
                flash.classList.remove('active');
                shockwave.classList.remove('active');
                badge.classList.remove('activating');
                container.classList.remove('shaking');
                
                // Reset display after a moment
                setTimeout(() => {
                    display.textContent = '1x';
                }, 2000);
                
                isAnimating = false;
            }, 800);
        }
        
        function triggerPreset(style, multiplier, intensity) {
            document.getElementById('flashStyle').value = style;
            document.getElementById('multiplierValue').value = multiplier;
            document.getElementById('intensity').value = intensity;
            activateMultiplier();
        }
        
        // Keyboard shortcut
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && !e.repeat) {
                e.preventDefault();
                activateMultiplier();
            }
        });
    </script>
</body>
</html>
