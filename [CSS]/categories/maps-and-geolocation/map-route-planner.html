<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Map Route Planner - JaZeR Maps Patterns</title>
  <link rel="stylesheet" href="../../../jazer-brand.css">
  <style>
    *{box-sizing:border-box}
    body{font-family:var(--font-body);background:var(--bg-dark);color:var(--text-light);margin:0;padding:1.25rem}
    .back-button{display:inline-flex;align-items:center;gap:.5rem;color:var(--text-gray);text-decoration:none;font-family:var(--font-secondary);font-weight:600;padding:.5rem 1rem;border-radius:8px;border:1px solid var(--border-default);background:var(--bg-card)}
    .back-button:hover{border-color:var(--jazer-cyan);color:var(--jazer-cyan)}

    .hero{text-align:center;margin:1rem 0}
    .hero h1{font-size:clamp(1.75rem,3.5vw,2.5rem);margin:.25rem 0;background:var(--gradient-text);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero p{color:var(--text-gray);max-width:760px;margin:.4rem auto}

    .layout{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:380px 1fr;gap:1rem}
    @media (max-width:900px){.layout{grid-template-columns:1fr}}

    .panel{background:var(--bg-card);border-radius:12px;padding:1rem;border:2px solid var(--border-default);box-shadow:var(--shadow-card)}
    .form-row{display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem}
    .input{flex:1}
    input[type=text]{width:100%;padding:.5rem;border-radius:8px;background:var(--bg-dark);border:1px solid var(--border-default);color:var(--text-light)}

    .waypoint-list{display:flex;flex-direction:column;gap:.35rem;max-height:220px;overflow:auto;margin-top:.5rem}
    .waypoint{display:flex;align-items:center;gap:.5rem;padding:.5rem;border-radius:8px;border:1px dashed rgba(255,255,255,0.03)}
    .waypoint .meta{flex:1}

    .modes{display:flex;gap:.35rem;flex-wrap:wrap;margin-top:.35rem}
    .mode{padding:.35rem .6rem;border-radius:8px;border:1px solid var(--border-default);cursor:pointer}
    .mode.active{border-color:var(--jazer-cyan);background:rgba(0,242,234,0.05);color:var(--jazer-cyan)}

    .map-area{background:linear-gradient(90deg,rgba(0,0,0,0.35),rgba(0,0,0,0.45));border-radius:12px;padding:1rem;border:1px solid var(--border-default);height:640px;position:relative}
    .map-inner{height:100%;display:flex;align-items:center;justify-content:center;color:var(--text-gray)}

    .summary{margin-top:.6rem;display:flex;gap:.6rem;justify-content:space-between;align-items:center}
    .small{font-size:.85rem;color:var(--text-gray)}

    .btn{padding:.45rem .65rem;border-radius:8px;border:none;background:var(--gradient-accent);color:var(--text-light);font-weight:700;cursor:pointer}
    .btn-ghost{padding:.4rem .6rem;border-radius:8px;border:1px solid var(--border-default);background:transparent;color:var(--text-light)}

  </style>
</head>
<body>
  <a href="index.html" class="back-button">‚Üê Back to Maps & Geolocation</a>
  <header class="hero">
    <h1>Map Route Planner</h1>
    <p>Build multi-stop routes, reorder waypoints, toggle transport modes, and estimate time & distance. Demonstrates interactive route modifications.</p>
  </header>

  <main class="layout">
    <aside class="panel">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem"><div style="font-weight:700">Route Builder</div><div class="small muted">Waypoints: <span id="wpCount">2</span></div></div>
      <div class="form-row"><input id="start" type="text" placeholder="Start address" class="input"><button id="addStart" class="btn-ghost">Set</button></div>
      <div class="form-row"><input id="end" type="text" placeholder="End address" class="input"><button id="addEnd" class="btn-ghost">Set</button></div>
      <div class="form-row"><input id="wayInput" type="text" placeholder="Add waypoint" class="input"><button id="addWP" class="btn">Add</button></div>

      <div style="margin-top:.5rem"><div class="small">Waypoints</div>
        <div class="waypoint-list" id="waypoints"></div>
      </div>

      <div style="margin-top:.6rem"><div class="small">Mode</div><div class="modes" id="modes"><button data-mode="driving" class="mode active">üöó Driving</button><button data-mode="walking" class="mode">üö∂ Walking</button><button data-mode="biking" class="mode">üö≤ Biking</button></div></div>

      <div style="margin-top:.6rem" class="summary"><div class="small">Distance: <strong id="distance">12.3 km</strong></div><div class="small">ETA: <strong id="eta">20 min</strong></div></div>

      <div style="margin-top:.8rem;display:flex;gap:.5rem;justify-content:space-between"><button id="optimizeBtn" class="btn-ghost">Optimize</button><button id="previewBtn" class="btn">Preview Route</button></div>

    </aside>

    <section class="map-area panel">
      <div class="map-inner" id="mapPreview">Route preview area</div>
    </section>
  </main>

  <script>
    const waypointsEl = document.getElementById('waypoints'); const wpCount = document.getElementById('wpCount'); const distanceEl = document.getElementById('distance'); const etaEl = document.getElementById('eta');
    let waypoints = [ {id:1, name:'Blue Moon Caf√©'}, {id:2, name:'Greenfield Park'} ];

    function renderWaypoints(){ waypointsEl.innerHTML=''; waypoints.forEach((w, idx)=>{ const row = document.createElement('div'); row.className='waypoint'; row.innerHTML = `<div class='meta'>${idx+1}. ${w.name}</div><div style='display:flex;gap:.35rem'><button class='btn-ghost wp-up' data-idx='${idx}' title='Move up'>‚ñ≤</button><button class='btn-ghost wp-down' data-idx='${idx}' title='Move down'>‚ñº</button><button class='btn-ghost wp-rm' data-idx='${idx}' title='Remove'>‚úñ</button></div>`; waypointsEl.appendChild(row); }); wpCount.textContent = waypoints.length; addWpHandlers(); updateRouteSummary(); }

    function addWpHandlers(){ document.querySelectorAll('.wp-up').forEach(b=>b.addEventListener('click', (e)=>{ const i = Number(e.target.dataset.idx); if(i<=0) return; [waypoints[i-1], waypoints[i]] = [waypoints[i], waypoints[i-1]]; renderWaypoints(); })); document.querySelectorAll('.wp-down').forEach(b=>b.addEventListener('click', (e)=>{ const i = Number(e.target.dataset.idx); if(i>=waypoints.length-1) return; [waypoints[i+1], waypoints[i]] = [waypoints[i], waypoints[i+1]]; renderWaypoints(); })); document.querySelectorAll('.wp-rm').forEach(b=>b.addEventListener('click', (e)=>{ const i = Number(e.target.dataset.idx); waypoints.splice(i,1); renderWaypoints(); })); }

    document.getElementById('addWP').addEventListener('click', ()=>{ const v = document.getElementById('wayInput').value.trim(); if(!v) return; waypoints.push({id:Date.now(), name:v}); document.getElementById('wayInput').value=''; renderWaypoints(); });

    document.getElementById('addStart').addEventListener('click', ()=>{ const v = document.getElementById('start').value.trim(); if(!v) return; waypoints.unshift({id:Date.now(), name:v}); renderWaypoints(); });
    document.getElementById('addEnd').addEventListener('click', ()=>{ const v = document.getElementById('end').value.trim(); if(!v) return; waypoints.push({id:Date.now(), name:v}); renderWaypoints(); });

    document.querySelectorAll('#modes .mode').forEach(btn=>btn.addEventListener('click', (e)=>{ document.querySelectorAll('#modes .mode').forEach(b=>b.classList.remove('active')); e.target.classList.add('active'); updateRouteSummary(); }));

    function updateRouteSummary(){ const mode = document.querySelector('#modes .mode.active').dataset.mode; // mock calculation
      let dist = 0; waypoints.forEach((w,i)=> dist += (1.2 + Math.random()*2)); const km = (dist).toFixed(1); distanceEl.textContent = km + ' km'; const etaMin = Math.round(dist * (mode==='walking' ? 12 : mode==='biking' ? 3 : 1.5)); etaEl.textContent = etaMin + ' min'; }

    document.getElementById('optimizeBtn').addEventListener('click', ()=>{ waypoints = [waypoints[0], ...waypoints.slice(1).sort((a,b)=> a.name.localeCompare(b.name))]; renderWaypoints(); });

    document.getElementById('previewBtn').addEventListener('click', ()=>{ const mp = document.getElementById('mapPreview'); mp.innerHTML = `<div style='text-align:center'><div style='font-weight:700; margin-bottom:.5rem'>${waypoints.length} Stops</div><div class='small muted'>${waypoints.map(w=>w.name).join(' ‚Üí ')}</div></div>`; });

    renderWaypoints();

  </script>
</body>
</html>