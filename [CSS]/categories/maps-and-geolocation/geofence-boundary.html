<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Geofence Boundary - JaZeR Maps Patterns</title>
  <link rel="stylesheet" href="../../../jazer-brand.css">
  <style>
    *{box-sizing:border-box}
    body{font-family:var(--font-body);background:var(--bg-dark);color:var(--text-light);margin:0;padding:1.25rem}
    .back-button{display:inline-flex;align-items:center;gap:.5rem;color:var(--text-gray);text-decoration:none;font-family:var(--font-secondary);font-weight:600;padding:.5rem 1rem;border-radius:8px;border:1px solid var(--border-default);background:var(--bg-card)}
    .back-button:hover{border-color:var(--jazer-cyan);color:var(--jazer-cyan)}

    .hero{text-align:center;margin:1rem 0}
    .hero h1{font-size:clamp(1.75rem,3.5vw,2.5rem);margin:0;background:var(--gradient-text);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero p{color:var(--text-gray);max-width:760px;margin:.5rem auto}

    .styles-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1rem;max-width:1400px;margin:0 auto}
    .style-card{background:var(--bg-card);border-radius:12px;padding:1rem;border:2px solid var(--border-default);box-shadow:var(--shadow-card)}
    .style-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}
    .style-number{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;background:var(--gradient-primary);border-radius:8px;font-weight:800}
    .style-title{font-family:var(--font-secondary);font-weight:700}
    .style-demo{padding:1rem;background:rgba(0,0,0,0.3);border-radius:10px;min-height:200px;display:flex;flex-direction:column;gap:.5rem}

    .map-mock{height:160px;border-radius:8px;background:linear-gradient(90deg, rgba(0,0,0,0.35), rgba(0,0,0,0.45));border:1px solid var(--border-default);position:relative;overflow:hidden}
    .map-mock svg{width:100%;height:100%}

    .controls{display:flex;gap:.5rem;align-items:center}
    .btn{font-family:var(--font-secondary);font-weight:700;padding:.4rem .6rem;border-radius:8px;background:var(--gradient-accent);border:none;color:var(--text-light);cursor:pointer}
    .btn-ghost{background:transparent;border:1px solid var(--border-default);color:var(--text-light)}

    .legend{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
    .legend .item{display:inline-flex;align-items:center;gap:.5rem;padding:.25rem .5rem;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid var(--border-default)}

    .status{display:inline-flex;gap:.5rem;align-items:center;padding:.25rem .5rem;border-radius:999px;background:rgba(255,255,255,0.03);border:1px solid var(--border-default);color:var(--text-gray);}

    .small{font-size:.9rem;color:var(--text-gray)}

    .pulse{animation:pulse 2s infinite}
    @keyframes pulse{0%{filter:drop-shadow(0 0 0 rgba(255,0,110,0.0))}50%{filter:drop-shadow(0 0 14px rgba(255,0,110,0.25))}100%{filter:drop-shadow(0 0 0 rgba(255,0,110,0.0))}}

    .dash-anim { stroke-dasharray: 6 6; animation: dash 1s linear infinite }
    @keyframes dash { from { stroke-dashoffset: 0 } to { stroke-dashoffset: 12 } }

    .alert { stroke: var(--jazer-pink); fill: rgba(255,0,110,0.06); }

  </style>
</head>
<body>
  <a href="index.html" class="back-button">‚Üê Back to Maps & Geolocation</a>
  <header class="hero">
    <h1>Geofence Boundary</h1>
    <p>Interactive geofence visualization and boundary animations. Demonstrates alert states, animated outlines, and entry/exit simulation.</p>
  </header>

  <main class="styles-grid">

    <section class="style-card">
      <div class="style-header">
        <div><span class="style-number">01</span></div>
        <div class="style-title">Animated Stroke</div>
      </div>
      <div class="style-demo">
        <div class="map-mock" id="map1">
          <svg viewBox="0 0 800 400" preserveAspectRatio="none">
            <defs>
              <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0%" stop-color="#00f2ea" stop-opacity="0.9"></stop>
                <stop offset="100%" stop-color="#9333ea" stop-opacity="0.9"></stop>
              </linearGradient>
            </defs>
            <rect x="0" y="0" width="800" height="400" fill="none"></rect>

            <polygon id="pzone1" points="120,350 100,220 200,160 340,190 430,320 300,360" fill="rgba(0,242,234,0.04)" stroke="url(#g1)" stroke-width="4" stroke-linejoin="round" class="dash-anim"></polygon>
            <circle id="user1" cx="50" cy="350" r="6" fill="#ff006e" stroke="#fff" stroke-width="2"></circle>
          </svg>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
          <div class="legend"><div class="item"><span style="width:12px;height:12px;background:linear-gradient(135deg,#00f2ea,#9333ea);border-radius:3px;display:inline-block"></span> Live geofence</div><div class="item"><span style="width:12px;height:12px;background:var(--jazer-pink);border-radius:12px;display:inline-block"></span> Alert</div></div>
          <div class="controls"><button id="sim1" class="btn-ghost">Simulate</button><button id="trigger1" class="btn">Trigger Alert</button></div>
        </div>
      </div>
    </section>

    <section class="style-card">
      <div class="style-header">
        <div><span class="style-number">02</span></div>
        <div class="style-title">Alert & Pulse</div>
      </div>
      <div class="style-demo">
        <div class="map-mock" id="map2">
          <svg viewBox="0 0 800 400" preserveAspectRatio="none">
            <rect x="0" y="0" width="800" height="400" fill="none"></rect>
            <circle id="zone2" cx="400" cy="200" r="120" fill="rgba(255,0,110,0.05)" stroke="rgba(255,0,110,0.6)" stroke-width="3"></circle>
            <circle id="pulse2" cx="400" cy="200" r="120" fill="none" stroke="rgba(255,0,110,0.3)" stroke-width="10" class="pulse"></circle>
            <circle id="user2" cx="80" cy="200" r="6" fill="#00f2ea" stroke="#fff" stroke-width="2"></circle>
          </svg>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
          <div class="small">Circle zone with live pulse and an entry alert that toggles the pulse and outline.</div>
          <div class="controls"><button id="sim2" class="btn-ghost">Simulate</button><button id="trigger2" class="btn">Alert</button></div>
        </div>
      </div>
    </section>

    <section class="style-card">
      <div class="style-header">
        <div><span class="style-number">03</span></div>
        <div class="style-title">Dashed Boundary</div>
      </div>
      <div class="style-demo">
        <div class="map-mock" id="map3">
          <svg viewBox="0 0 800 400" preserveAspectRatio="none">
            <rect x="0" y="0" width="800" height="400" fill="none"></rect>
            <rect id="zone3" x="220" y="150" width="320" height="140" fill="rgba(0,0,0,0.04)" stroke="rgba(147,51,234,0.5)" stroke-width="3" stroke-dasharray="8 6" class="dash-anim"></rect>
            <circle id="user3" cx="60" cy="60" r="6" fill="#ff006e" stroke="#fff" stroke-width="2"></circle>
          </svg>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
          <div class="small">Rectangle zone with dashed animated outline.</div>
          <div class="controls"><button id="sim3" class="btn-ghost">Simulate</button><button id="highlight3" class="btn">Highlight</button></div>
        </div>
      </div>
    </section>

    <section class="style-card">
      <div class="style-header">
        <div><span class="style-number">04</span></div>
        <div class="style-title">Multiple Zones</div>
      </div>
      <div class="style-demo">
        <div class="map-mock" id="map4">
          <svg viewBox="0 0 800 400" preserveAspectRatio="none">
            <rect x="0" y="0" width="800" height="400" fill="none"></rect>
            <polygon id="mzone1" points="120,250 180,90 260,120 210,240" fill="rgba(0,242,234,0.03)" stroke="rgba(0,242,234,0.5)" stroke-width="3"></polygon>
            <circle id="mzone2" cx="520" cy="190" r="80" fill="rgba(255,0,110,0.03)" stroke="rgba(255,0,110,0.4)" stroke-width="3"></circle>
            <rect id="mzone3" x="430" y="260" width="100" height="60" fill="rgba(147,51,234,0.03)" stroke="rgba(147,51,234,0.4)" stroke-width="3"></rect>
            <circle id="user4" cx="20" cy="350" r="7" fill="#00f2ea" stroke="#fff" stroke-width="2"></circle>
          </svg>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
          <div class="small">Multiple overlapping zones with an active highlight toggle.</div>
          <div class="controls"><button id="sim4" class="btn-ghost">Simulate</button><button id="toggle4" class="btn">Toggle Active</button></div>
        </div>
      </div>
    </section>

  </main>

  <script>
    function animateUser(el, path, duration = 4000){ let idx = 0; const step = duration / path.length; const timer = setInterval(()=>{ if(idx >= path.length){ clearInterval(timer); return; } el.setAttribute('cx', path[idx][0]); el.setAttribute('cy', path[idx][1]); idx++; }, step); }

    function pointInPoly(x, y, poly){ let inside = false; for(let i=0,j=poly.length-1;i<poly.length;j=i++){ const xi = poly[i][0], yi = poly[i][1]; const xj = poly[j][0], yj = poly[j][1]; const intersect = ((yi>y)!==(yj>y)) && (x < (xj-xi)*(y-yi)/(yj-yi)+xi); if(intersect) inside = !inside; } return inside; }

    // Map 1 simulation
    const p1 = document.getElementById('pzone1'); const user1 = document.getElementById('user1');
    document.getElementById('sim1').addEventListener('click', ()=>{
      p1.classList.remove('alert'); const path = [[50,350],[110,340],[160,300],[220,260],[300,200],[380,230],[420,260],[480,320],[520,360]]; animateUser(user1, path);
      setTimeout(()=>{ p1.classList.add('alert'); p1.style.fill='rgba(255,0,110,0.06)'; setTimeout(()=>{ p1.classList.remove('alert'); p1.style.fill='rgba(0,242,234,0.04)'; }, 3500); }, 1800);
    });

    document.getElementById('trigger1').addEventListener('click', ()=>{ p1.classList.toggle('alert'); if(p1.classList.contains('alert')) p1.style.fill='rgba(255,0,110,0.06)'; else p1.style.fill='rgba(0,242,234,0.04)'; });

    // Map 2 simulation
    const user2 = document.getElementById('user2'); const zone2 = document.getElementById('zone2'); const pulse2 = document.getElementById('pulse2');
    document.getElementById('sim2').addEventListener('click', ()=>{
      const path = [[80,200],[220,200],[340,200],[440,200],[520,200]]; animateUser(user2, path, 3000);
      let entered = false; const check = setInterval(()=>{ const cx = Number(user2.getAttribute('cx')), cy = Number(user2.getAttribute('cy')); const dx = cx - 400; const dy = cy - 200; const r = Math.sqrt(dx*dx+dy*dy); if(r < 120 && !entered){ entered = true; pulse2.classList.add('pulse'); zone2.setAttribute('stroke','rgba(255,0,110,0.6)') } if(entered && r >= 120){ clearInterval(check); pulse2.classList.remove('pulse'); zone2.setAttribute('stroke','rgba(255,0,110,0.4)') } }, 200);
    });
    document.getElementById('trigger2').addEventListener('click', ()=>{ zone2.setAttribute('stroke', zone2.getAttribute('stroke') === 'rgba(255,0,110,0.6)' ? 'rgba(0,242,234,0.6)' : 'rgba(255,0,110,0.6)'; ); });

    // Map 3 highlight
    const user3 = document.getElementById('user3'); const zone3 = document.getElementById('zone3');
    document.getElementById('sim3').addEventListener('click', ()=>{ const path = [[60,60],[120,140],[180,180],[240,150],[280,130]]; animateUser(user3,path,3000); });
    document.getElementById('highlight3').addEventListener('click', ()=>{ zone3.classList.toggle('dash-anim'); if(zone3.classList.contains('dash-anim')) zone3.style.stroke='rgba(147,51,234,0.9)'; else zone3.style.stroke='rgba(147,51,234,0.5)'; });

    // Map 4 toggles
    const user4 = document.getElementById('user4'); const mzone1 = document.getElementById('mzone1'); const mzone2 = document.getElementById('mzone2'); const mzone3 = document.getElementById('mzone3');
    document.getElementById('sim4').addEventListener('click', ()=>{ const path = [[20,350],[100,300],[180,200],[240,160],[300,140],[360,160],[420,200],[520,160],[620,200]]; animateUser(user4, path, 6000); });
    document.getElementById('toggle4').addEventListener('click', ()=>{ [mzone1,mzone2,mzone3].forEach(z=>z.classList.toggle('alert')); });

  </script>
</body>
</html>