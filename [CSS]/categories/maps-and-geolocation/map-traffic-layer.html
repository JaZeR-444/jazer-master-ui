<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Map Traffic Layer - JaZeR Maps Patterns</title>
  <link rel="stylesheet" href="../../../jazer-brand.css">
  <style>
    *{box-sizing:border-box}
    body{font-family:var(--font-body);background:var(--bg-dark);color:var(--text-light);margin:0;padding:1.25rem}
    .back-button{display:inline-flex;align-items:center;gap:.5rem;color:var(--text-gray);text-decoration:none;font-family:var(--font-secondary);font-weight:600;padding:.5rem 1rem;border-radius:8px;border:1px solid var(--border-default);background:var(--bg-card)}
    .back-button:hover{border-color:var(--jazer-cyan);color:var(--jazer-cyan)}

    .hero{text-align:center;margin:1rem 0}
    .hero h1{font-size:clamp(1.75rem,3.5vw,2.5rem);background:var(--gradient-text);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero p{color:var(--text-gray);max-width:760px;margin:.4rem auto}

    .layout{display:grid;grid-template-columns:360px 1fr;gap:1rem;max-width:1400px;margin:0 auto}
    @media (max-width:900px){.layout{grid-template-columns:1fr}}

    .panel{background:var(--bg-card);border-radius:12px;padding:1rem;border:2px solid var(--border-default);box-shadow:var(--shadow-card)}
    .map-area{height:640px;border-radius:12px;border:1px solid var(--border-default);background:linear-gradient(90deg, rgba(0,0,0,0.35), rgba(0,0,0,0.45));position:relative;overflow:hidden}

    .controls{display:flex;flex-direction:column;gap:.5rem}
    .row{display:flex;gap:.5rem;align-items:center}
    .label{min-width:90px;color:var(--text-gray)}
    .toggle{padding:.4rem .6rem;border-radius:8px;border:1px solid var(--border-default);background:transparent;color:var(--text-light);cursor:pointer}

    .severity{display:flex;gap:.4rem;align-items:center}
    .small{font-size:.85rem;color:var(--text-gray)}
    .legend{display:flex;gap:.5rem;align-items:center}

  </style>
</head>
<body>
  <a href="index.html" class="back-button">← Back to Maps & Geolocation</a>
  <header class="hero">
    <h1>Map Traffic Layer</h1>
    <p>Toggle traffic layers with speed-based color scales, incident markers, and simulated live updates.</p>
  </header>

  <main class="layout">
    <aside class="panel">
      <div style="font-weight:700;margin-bottom:.5rem">Traffic Layer</div>
      <div class="controls">
        <div class="row"><div class="label">Layer</div><label><input id="toggleTraffic" type="checkbox" checked> Traffic</label></div>
        <div class="row"><div class="label">Incidents</div><label><input id="toggleIncidents" type="checkbox" checked> Show incidents</label></div>
        <div class="row"><div class="label">Severity</div><select id="severity" class="toggle"><option value="all">All</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option></select></div>
        <div class="row"><div class="label">Live rate</div><input id="rate" type="range" min="0" max="2000" value="1200"></div>
        <div style="display:flex;gap:.5rem"><button id="refresh" class="btn-ghost">Refresh</button><button id="simulate" class="btn">Simulate</button></div>
        <div style="margin-top:.5rem"><div class="small">Legend</div><div class="legend"><div class="small">Smooth</div><div style="width:100px;height:8px;background:linear-gradient(90deg,#00f2ea,#9333ea,#ff006e);border-radius:4px;margin:0 6px"></div><div class="small">Congested</div></div></div>
      </div>
    </aside>

    <section class="panel map-area">
      <div id="trafficArea" class="map-area" style="display:flex;align-items:center;justify-content:center;color:var(--text-gray)">Traffic overlay canvas</div>
    </section>
  </main>

  <script>
    const trafficArea = document.getElementById('trafficArea'); const toggleTraffic = document.getElementById('toggleTraffic'); const toggleIncidents = document.getElementById('toggleIncidents'); const severity = document.getElementById('severity'); const rate = document.getElementById('rate');
    function renderTraffic(){ const show = toggleTraffic.checked; const incidents = toggleIncidents.checked; const sev = severity.value; const r = rate.value; trafficArea.innerHTML = `<div style='text-align:center'><div style='font-weight:700;margin-bottom:.35rem'>${show ? 'Traffic ON' : 'Traffic OFF'}</div><div class='small muted'>Incidents: ${incidents ? 'Visible' : 'Hidden'} • Severity: ${sev} • Rate: ${r}ms</div></div>`; }
    document.getElementById('refresh').addEventListener('click', renderTraffic); document.getElementById('simulate').addEventListener('click', ()=>{ trafficArea.innerHTML = `<div style='text-align:center'><div style='font-weight:700'>Live simulation</div><div class='small muted'>Emitting five incidents...</div></div>`; });
    document.querySelectorAll('#toggleTraffic,#toggleIncidents,#severity,#rate').forEach(i=>i.addEventListener('change', renderTraffic)); renderTraffic();
  </script>
</body>
</html>