<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Route Waypoint List - JaZeR Maps Patterns</title>
  <link rel="stylesheet" href="../../../jazer-brand.css">
  <style>
    *{box-sizing:border-box}
    body{font-family:var(--font-body);background:var(--bg-dark);color:var(--text-light);margin:0;padding:1.25rem}
    .back-button{display:inline-flex;align-items:center;gap:.5rem;color:var(--text-gray);text-decoration:none;font-family:var(--font-secondary);font-weight:600;padding:.5rem 1rem;border-radius:8px;border:1px solid var(--border-default);background:var(--bg-card)}
    .back-button:hover{border-color:var(--jazer-cyan);color:var(--jazer-cyan)}

    .hero{text-align:center;margin:1rem 0}
    .hero h1{font-size:clamp(1.75rem,3.5vw,2.5rem);background:var(--gradient-text);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero p{color:var(--text-gray);max-width:760px;margin:.4rem auto}

    .panel{max-width:900px;margin:0 auto;background:var(--bg-card);border-radius:12px;padding:1rem;border:2px solid var(--border-default)}
    .controls{display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem}
    input[type=text]{flex:1;padding:.45rem .6rem;border-radius:8px;background:var(--bg-dark);border:1px solid var(--border-default);color:var(--text-light)}
    .btn{padding:.45rem .6rem;border-radius:8px;border:none;background:var(--gradient-accent);color:var(--text-light);font-weight:700;cursor:pointer}
    .btn-ghost{padding:.35rem .5rem;border-radius:6px;border:1px solid var(--border-default);background:transparent;color:var(--text-light)}

    .waypoint-list{display:flex;flex-direction:column;gap:.4rem}
    .waypoint{display:flex;align-items:center;gap:.6rem;padding:.6rem;border-radius:8px;border:1px solid var(--border-default)}
    .drag{cursor:grab}
    .reorder-hint{font-size:.85rem;color:var(--text-gray)}
  </style>
</head>
<body>
  <a href="index.html" class="back-button">← Back to Maps & Geolocation</a>
  <header class="hero">
    <h1>Route Waypoint List</h1>
    <p>Manage route waypoints with drag-to-reorder, edit, and quick actions. Demonstrates reorder logic and inline edit modes.</p>
  </header>

  <main class="panel">
    <div class="controls"><input id="wpInput" type="text" placeholder="Add a waypoint"><button id="addWp" class="btn">Add</button></div>
    <div class="reorder-hint">Drag and drop to reorder</div>
    <div class="waypoint-list" id="wpList"></div>
  </main>

  <script>
    const wpList = document.getElementById('wpList'); const wpInput = document.getElementById('wpInput'); const addWp = document.getElementById('addWp');
    let wps = [ {id:1, name:'Start'}, {id:2, name:'Mid Point'}, {id:3, name:'End'} ];

    function render(){ wpList.innerHTML=''; wps.forEach((wp, idx)=>{ const el = document.createElement('div'); el.className='waypoint'; el.draggable=true; el.dataset.idx = idx; el.innerHTML = `<div class='drag'>☰</div><div style='flex:1'><div style='font-weight:700'>${wp.name}</div><div class='small muted'>#${idx+1}</div></div><div style='display:flex;gap:.35rem'><button class='btn-ghost edit' data-idx='${idx}'>✎</button><button class='btn-ghost rm' data-idx='${idx}'>✖</button></div>`; wpList.appendChild(el); }); addHandlers(); }

    function addHandlers(){ document.querySelectorAll('.edit').forEach(b=>b.addEventListener('click', (e)=>{ const idx = Number(e.target.dataset.idx); const newName = prompt('Edit waypoint', wps[idx].name); if(newName) { wps[idx].name = newName; render(); }})); document.querySelectorAll('.rm').forEach(b=>b.addEventListener('click', (e)=>{ const idx = Number(e.target.dataset.idx); if(confirm('Delete waypoint?')){ wps.splice(idx,1); render(); }}));

      // drag
      document.querySelectorAll('.waypoint').forEach(el=>{
        el.addEventListener('dragstart', (e)=>{ e.dataTransfer.setData('text/plain', el.dataset.idx); el.style.opacity=0.5; });
        el.addEventListener('dragend', ()=>el.style.opacity=1);
        el.addEventListener('dragover', (e)=>{ e.preventDefault(); el.style.border='1px dashed var(--jazer-cyan)'; });
        el.addEventListener('dragleave', ()=>{ el.style.border='1px solid var(--border-default)'; });
        el.addEventListener('drop', (e)=>{ e.preventDefault(); el.style.border='1px solid var(--border-default)'; const from = Number(e.dataTransfer.getData('text/plain')); const to = Number(el.dataset.idx); const item = wps.splice(from,1)[0]; wps.splice(to,0,item); render(); });
      });
    }

    addWp.addEventListener('click', ()=>{ const v = wpInput.value.trim(); if(!v) return; wps.push({id:Date.now(), name:v}); wpInput.value=''; render(); });

    render();
  </script>
</body>
</html>