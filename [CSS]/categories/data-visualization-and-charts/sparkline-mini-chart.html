<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sparkline Mini Chart - JaZeR CSS Patterns</title>
    <link rel="stylesheet" href="../../../jazer-brand.css">
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            padding: 1.5rem;
            line-height: 1.6;
        }

        /* Back Button */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--jazer-cyan);
            text-decoration: none;
            font-family: var(--font-secondary);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border: 1px solid transparent;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
        }

        .back-button:hover {
            color: var(--jazer-pink);
            border-color: var(--jazer-pink);
            transform: translateX(-5px);
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 2rem 1.5rem;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.08) 0%, rgba(147, 51, 234, 0.08) 50%, rgba(236, 72, 153, 0.08) 100%);
            border-radius: 16px;
            border: 1px solid rgba(6, 182, 212, 0.2);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
        }

        .hero h1 {
            font-family: var(--font-primary);
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: 800;
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .hero-description {
            color: var(--text-gray);
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (min-width: 1000px) {
            .main-grid {
                grid-template-columns: 1fr 340px;
            }
        }

        /* Panel Styling */
        .panel {
            background: var(--bg-card);
            border: 2px solid var(--border-default);
            border-radius: 16px;
            padding: 1.5rem;
            transition: border-color 0.3s ease;
        }

        .panel:hover {
            border-color: rgba(6, 182, 212, 0.3);
        }

        .panel-title {
            font-family: var(--font-secondary);
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--jazer-cyan);
            margin-bottom: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .panel-title::before {
            content: '';
            width: 4px;
            height: 16px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        /* Demo Area */
        .demo-area {
            min-height: 500px;
        }

        /* Chart Type Tabs */
        .chart-type-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .type-tab {
            padding: 0.6rem 1rem;
            font-size: 0.8rem;
            border-radius: 8px;
            border: 2px solid var(--border-default);
            background: transparent;
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-secondary);
            font-weight: 600;
        }

        .type-tab:hover {
            border-color: var(--jazer-purple);
            color: var(--text-light);
        }

        .type-tab.active {
            border-color: var(--jazer-cyan);
            background: rgba(6, 182, 212, 0.15);
            color: var(--jazer-cyan);
        }

        /* Sparkline Demo Grid */
        .sparkline-grid {
            display: grid;
            gap: 1rem;
        }

        /* Sparkline Card */
        .sparkline-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
        }

        .sparkline-card:hover {
            border-color: var(--jazer-cyan);
            transform: translateX(4px);
        }

        .sparkline-info {
            flex: 0 0 140px;
        }

        .sparkline-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: var(--font-secondary);
            margin-bottom: 0.25rem;
        }

        .sparkline-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: var(--font-primary);
            color: var(--text-light);
        }

        .sparkline-change {
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-top: 0.25rem;
        }

        .sparkline-change.positive {
            color: #10b981;
        }

        .sparkline-change.negative {
            color: #ef4444;
        }

        .sparkline-change.neutral {
            color: var(--text-muted);
        }

        /* SVG Container */
        .sparkline-svg-container {
            flex: 1;
            height: 50px;
            min-width: 120px;
        }

        .sparkline-svg {
            width: 100%;
            height: 100%;
        }

        /* Sparkline Styles */
        .sparkline-line {
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .sparkline-area {
            opacity: 0.2;
        }

        .sparkline-bar {
            rx: 2;
        }

        .sparkline-dot {
            fill: white;
            stroke-width: 2;
        }

        .sparkline-dot-last {
            fill: var(--jazer-cyan);
            filter: drop-shadow(0 0 4px var(--jazer-cyan));
        }

        /* Large Preview */
        .large-preview {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .large-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .large-preview-title {
            font-family: var(--font-secondary);
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .large-preview-value {
            font-size: 2rem;
            font-weight: 800;
            font-family: var(--font-primary);
            color: var(--text-light);
        }

        .large-preview-meta {
            text-align: right;
        }

        .large-preview-period {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .large-sparkline-container {
            height: 100px;
            width: 100%;
        }

        .large-sparkline {
            width: 100%;
            height: 100%;
        }

        /* Inline Sparklines Demo */
        .inline-demo {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 1.25rem;
        }

        .inline-text {
            font-size: 0.95rem;
            color: var(--text-gray);
            line-height: 2;
        }

        .inline-sparkline {
            display: inline-block;
            vertical-align: middle;
            margin: 0 0.25rem;
        }

        .inline-sparkline svg {
            width: 60px;
            height: 20px;
        }

        .inline-highlight {
            color: var(--jazer-cyan);
            font-weight: 600;
        }

        /* Controls Panel */
        .controls-panel {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* Accordion */
        details {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-default);
            border-radius: 10px;
            overflow: hidden;
        }

        details[open] {
            border-color: rgba(6, 182, 212, 0.3);
        }

        summary {
            padding: 0.875rem 1rem;
            cursor: pointer;
            font-family: var(--font-secondary);
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.2s ease;
            list-style: none;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::after {
            content: '+';
            font-size: 1.2rem;
            color: var(--jazer-cyan);
            transition: transform 0.2s ease;
        }

        details[open] summary::after {
            transform: rotate(45deg);
        }

        summary:hover {
            background: rgba(6, 182, 212, 0.05);
        }

        .details-content {
            padding: 1rem;
            border-top: 1px solid var(--border-default);
        }

        /* Control Groups */
        .control-group {
            margin-bottom: 1rem;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            font-family: var(--font-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Range Slider */
        .range-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            appearance: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--jazer-cyan);
            cursor: pointer;
            box-shadow: 0 0 8px rgba(6, 182, 212, 0.5);
            transition: transform 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .range-value {
            min-width: 45px;
            text-align: right;
            font-size: 0.85rem;
            color: var(--jazer-cyan);
            font-weight: 600;
            font-family: var(--font-secondary);
        }

        /* Select Dropdown */
        select {
            width: 100%;
            padding: 0.6rem 0.875rem;
            font-size: 0.85rem;
            border-radius: 8px;
            border: 2px solid var(--border-default);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            cursor: pointer;
            font-family: var(--font-secondary);
            transition: border-color 0.2s ease;
        }

        select:hover, select:focus {
            border-color: var(--jazer-cyan);
            outline: none;
        }

        select option {
            background: #1a1a1a;
            color: var(--text-light);
        }

        /* Color Buttons */
        .color-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
        }

        .color-btn {
            aspect-ratio: 1;
            border-radius: 8px;
            border: 2px solid var(--border-default);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .color-btn:hover {
            transform: scale(1.1);
        }

        .color-btn.active {
            border-color: white;
            box-shadow: 0 0 12px currentColor;
        }

        .color-btn.active::after {
            content: '';
            position: absolute;
            inset: 4px;
            border: 2px solid white;
            border-radius: 4px;
        }

        /* Toggle Switch */
        .toggle-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0;
        }

        .toggle-label {
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            left: 3px;
            bottom: 3px;
            background: var(--text-gray);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: rgba(6, 182, 212, 0.3);
        }

        .toggle-switch input:checked + .toggle-slider::before {
            transform: translateX(20px);
            background: var(--jazer-cyan);
            box-shadow: 0 0 8px var(--jazer-cyan);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .btn {
            flex: 1;
            padding: 0.7rem 1rem;
            font-size: 0.8rem;
            border-radius: 8px;
            border: 2px solid var(--border-default);
            background: transparent;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-secondary);
            font-weight: 600;
        }

        .btn:hover {
            border-color: var(--jazer-purple);
            color: var(--jazer-purple);
        }

        .btn-primary {
            background: var(--gradient-accent);
            border-color: transparent;
        }

        .btn-primary:hover {
            filter: brightness(1.1);
            color: white;
        }

        /* Data Table */
        .data-table {
            width: 100%;
            font-size: 0.8rem;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-default);
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .data-label {
            color: var(--text-muted);
        }

        .data-input {
            width: 60px;
            padding: 0.25rem 0.5rem;
            text-align: center;
            font-size: 0.8rem;
            border-radius: 4px;
            border: 1px solid var(--border-default);
            background: rgba(0, 0, 0, 0.3);
            color: var(--jazer-cyan);
            font-weight: 600;
        }

        .data-input:focus {
            border-color: var(--jazer-cyan);
            outline: none;
        }

        /* Presets Section */
        .presets-section {
            margin-top: 1.5rem;
        }

        .presets-scroll {
            display: flex;
            gap: 0.75rem;
            overflow-x: auto;
            padding: 0.5rem 0;
            scrollbar-width: thin;
            scrollbar-color: var(--jazer-cyan) transparent;
        }

        .presets-scroll::-webkit-scrollbar {
            height: 6px;
        }

        .presets-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .presets-scroll::-webkit-scrollbar-thumb {
            background: var(--jazer-cyan);
            border-radius: 3px;
        }

        .preset-card {
            flex: 0 0 auto;
            width: 140px;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .preset-card:hover {
            border-color: var(--jazer-purple);
            transform: translateY(-4px);
        }

        .preset-card.active {
            border-color: var(--jazer-cyan);
            background: rgba(6, 182, 212, 0.1);
        }

        .preset-preview {
            height: 40px;
            margin-bottom: 0.5rem;
        }

        .preset-name {
            font-size: 0.75rem;
            color: var(--text-gray);
            font-weight: 600;
        }

        /* Status Bar */
        .status-bar {
            background: var(--bg-card);
            border: 2px solid var(--border-default);
            border-radius: 12px;
            padding: 0.875rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .status-info {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.75rem;
        }

        .status-item span:first-child {
            color: var(--text-muted);
            font-family: var(--font-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-item span:last-child {
            color: var(--jazer-cyan);
            font-weight: 600;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-gray);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--jazer-cyan);
            border-radius: 50%;
            animation: statusPulse 2s ease-in-out infinite;
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 4px var(--jazer-cyan); }
            50% { opacity: 0.5; box-shadow: 0 0 8px var(--jazer-cyan); }
        }

        /* Animation */
        @keyframes drawLine {
            from { stroke-dashoffset: 1000; }
            to { stroke-dashoffset: 0; }
        }

        .animate-line {
            stroke-dasharray: 1000;
            animation: drawLine 1.5s ease-out forwards;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .sparkline-card {
                flex-direction: column;
                text-align: center;
            }

            .sparkline-info {
                flex: none;
            }

            .sparkline-svg-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">← Back to Data Visualization & Charts</a>

    <header class="hero">
        <h1>Sparkline Mini Chart</h1>
        <p class="hero-description">Compact inline charts for visualizing trends and data patterns within text, tables, and dashboard cards.</p>
    </header>

    <div class="main-grid">
        <!-- Demo Area -->
        <section class="panel demo-area">
            <div class="panel-title">Interactive Preview</div>
            
            <div class="chart-type-tabs">
                <button class="type-tab active" data-type="line">Line</button>
                <button class="type-tab" data-type="area">Area</button>
                <button class="type-tab" data-type="bar">Bar</button>
                <button class="type-tab" data-type="dot">Dot</button>
            </div>

            <!-- Large Preview -->
            <div class="large-preview">
                <div class="large-preview-header">
                    <div>
                        <div class="large-preview-title">Revenue Trend</div>
                        <div class="large-preview-value" id="mainValue">$12,847</div>
                        <div class="sparkline-change positive" id="mainChange">
                            <span>↑</span> +18.3% vs last period
                        </div>
                    </div>
                    <div class="large-preview-meta">
                        <div class="large-preview-period">Last 12 months</div>
                    </div>
                </div>
                <div class="large-sparkline-container">
                    <svg class="large-sparkline" id="mainSparkline" preserveAspectRatio="none"></svg>
                </div>
            </div>

            <!-- Sparkline Cards Grid -->
            <div class="sparkline-grid" id="sparklineGrid">
                <!-- Rendered by JS -->
            </div>

            <!-- Inline Demo -->
            <div class="inline-demo" style="margin-top: 1rem;">
                <div class="inline-text">
                    The platform saw <span class="inline-highlight">user growth</span>
                    <span class="inline-sparkline" id="inlineSparkline1"></span>
                    increase by 23% this quarter. Meanwhile, 
                    <span class="inline-highlight">engagement metrics</span>
                    <span class="inline-sparkline" id="inlineSparkline2"></span>
                    remained steady with a slight upward trend.
                    Server <span class="inline-highlight">response times</span>
                    <span class="inline-sparkline" id="inlineSparkline3"></span>
                    improved significantly after the infrastructure upgrade.
                </div>
            </div>
        </section>

        <!-- Controls Panel -->
        <aside class="controls-panel">
            <div class="panel">
                <div class="panel-title">Chart Configuration</div>

                <details open>
                    <summary>Appearance</summary>
                    <div class="details-content">
                        <div class="control-group">
                            <label class="control-label">Line Thickness</label>
                            <div class="range-container">
                                <input type="range" id="lineThickness" min="1" max="6" value="2">
                                <span class="range-value" id="lineThicknessDisplay">2px</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Chart Height</label>
                            <div class="range-container">
                                <input type="range" id="chartHeight" min="30" max="80" value="50">
                                <span class="range-value" id="chartHeightDisplay">50px</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Primary Color</label>
                            <div class="color-options">
                                <button class="color-btn active" data-color="#00f2ea" style="background: #00f2ea" title="Cyan"></button>
                                <button class="color-btn" data-color="#9333ea" style="background: #9333ea" title="Purple"></button>
                                <button class="color-btn" data-color="#ff006e" style="background: #ff006e" title="Pink"></button>
                                <button class="color-btn" data-color="#10b981" style="background: #10b981" title="Green"></button>
                                <button class="color-btn" data-color="#ffbe0b" style="background: #ffbe0b" title="Yellow"></button>
                            </div>
                        </div>
                    </div>
                </details>

                <details>
                    <summary>Options</summary>
                    <div class="details-content">
                        <div class="toggle-row">
                            <span class="toggle-label">Show End Dot</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="showEndDot" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="toggle-row">
                            <span class="toggle-label">Fill Area</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="fillArea" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="toggle-row">
                            <span class="toggle-label">Smooth Curve</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="smoothCurve" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="toggle-row">
                            <span class="toggle-label">Animate Drawing</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="animateDrawing" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-group" style="margin-top: 0.75rem;">
                            <label class="control-label">Reference Line</label>
                            <select id="referenceLine">
                                <option value="none">None</option>
                                <option value="average">Average</option>
                                <option value="min">Minimum</option>
                                <option value="max">Maximum</option>
                                <option value="zero">Zero Line</option>
                            </select>
                        </div>
                    </div>
                </details>

                <details>
                    <summary>Data Points</summary>
                    <div class="details-content">
                        <div class="control-group">
                            <label class="control-label">Number of Points</label>
                            <div class="range-container">
                                <input type="range" id="dataPoints" min="5" max="30" value="12">
                                <span class="range-value" id="dataPointsDisplay">12</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Data Volatility</label>
                            <div class="range-container">
                                <input type="range" id="volatility" min="5" max="50" value="20">
                                <span class="range-value" id="volatilityDisplay">20%</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Trend Direction</label>
                            <select id="trendDirection">
                                <option value="random">Random</option>
                                <option value="up">Upward</option>
                                <option value="down">Downward</option>
                                <option value="flat">Flat</option>
                                <option value="volatile">Volatile</option>
                            </select>
                        </div>
                    </div>
                </details>

                <details>
                    <summary>Card Data</summary>
                    <div class="details-content">
                        <div class="data-table" id="cardDataTable">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                </details>

                <div class="action-buttons">
                    <button class="btn" id="regenerateBtn">Regenerate</button>
                    <button class="btn btn-primary" id="resetBtn">Reset</button>
                </div>
            </div>
        </aside>
    </div>

    <!-- Presets Section -->
    <section class="presets-section">
        <div class="panel">
            <div class="panel-title">Quick Presets</div>
            <div class="presets-scroll" id="presetsScroll">
                <!-- Presets rendered by JS -->
            </div>
        </div>
    </section>

    <!-- Status Bar -->
    <footer class="status-bar">
        <div class="status-info">
            <div class="status-item">
                <span>Type:</span>
                <span id="statusType">Line</span>
            </div>
            <div class="status-item">
                <span>Points:</span>
                <span id="statusPoints">12</span>
            </div>
            <div class="status-item">
                <span>Thickness:</span>
                <span id="statusThickness">2px</span>
            </div>
            <div class="status-item">
                <span>Trend:</span>
                <span id="statusTrend">+18.3%</span>
            </div>
        </div>
        <div class="status-indicator">
            <span class="status-dot"></span>
            <span>Chart Ready</span>
        </div>
    </footer>

    <script>
        // State
        const state = {
            type: 'line',
            lineThickness: 2,
            chartHeight: 50,
            color: '#00f2ea',
            showEndDot: true,
            fillArea: true,
            smoothCurve: true,
            animateDrawing: true,
            referenceLine: 'none',
            dataPoints: 12,
            volatility: 20,
            trendDirection: 'random',
            mainData: [],
            cardData: [
                { label: 'Users', value: '8,432', change: 12.5, data: [] },
                { label: 'Revenue', value: '$24.8k', change: -3.2, data: [] },
                { label: 'Orders', value: '1,247', change: 8.7, data: [] },
                { label: 'Conversion', value: '3.2%', change: 0.5, data: [] }
            ]
        };

        // Presets
        const presets = [
            { name: 'Clean Line', type: 'line', thickness: 2, showEndDot: true, fillArea: false, smoothCurve: true, color: '#00f2ea' },
            { name: 'Filled Area', type: 'area', thickness: 2, showEndDot: true, fillArea: true, smoothCurve: true, color: '#9333ea' },
            { name: 'Bar Chart', type: 'bar', thickness: 3, showEndDot: false, fillArea: false, smoothCurve: false, color: '#ff006e' },
            { name: 'Dot Plot', type: 'dot', thickness: 2, showEndDot: false, fillArea: false, smoothCurve: false, color: '#10b981' },
            { name: 'Sharp Line', type: 'line', thickness: 1, showEndDot: true, fillArea: false, smoothCurve: false, color: '#ffbe0b' },
            { name: 'Bold Fill', type: 'area', thickness: 3, showEndDot: true, fillArea: true, smoothCurve: true, color: '#ff006e' }
        ];

        // DOM Elements
        const typeTabs = document.querySelectorAll('.type-tab');
        const mainSparkline = document.getElementById('mainSparkline');
        const sparklineGrid = document.getElementById('sparklineGrid');
        const mainValue = document.getElementById('mainValue');
        const mainChange = document.getElementById('mainChange');
        const lineThicknessSlider = document.getElementById('lineThickness');
        const lineThicknessDisplay = document.getElementById('lineThicknessDisplay');
        const chartHeightSlider = document.getElementById('chartHeight');
        const chartHeightDisplay = document.getElementById('chartHeightDisplay');
        const colorBtns = document.querySelectorAll('.color-btn');
        const showEndDotToggle = document.getElementById('showEndDot');
        const fillAreaToggle = document.getElementById('fillArea');
        const smoothCurveToggle = document.getElementById('smoothCurve');
        const animateDrawingToggle = document.getElementById('animateDrawing');
        const referenceLineSelect = document.getElementById('referenceLine');
        const dataPointsSlider = document.getElementById('dataPoints');
        const dataPointsDisplay = document.getElementById('dataPointsDisplay');
        const volatilitySlider = document.getElementById('volatility');
        const volatilityDisplay = document.getElementById('volatilityDisplay');
        const trendDirectionSelect = document.getElementById('trendDirection');
        const regenerateBtn = document.getElementById('regenerateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const presetsScroll = document.getElementById('presetsScroll');
        const cardDataTable = document.getElementById('cardDataTable');

        // Status Elements
        const statusType = document.getElementById('statusType');
        const statusPoints = document.getElementById('statusPoints');
        const statusThickness = document.getElementById('statusThickness');
        const statusTrend = document.getElementById('statusTrend');

        // Generate random data
        function generateData(points, volatility, trend) {
            const data = [];
            let value = 50;
            const trendBias = {
                'random': 0,
                'up': 2,
                'down': -2,
                'flat': 0,
                'volatile': 0
            };
            const vol = trend === 'volatile' ? volatility * 2 : volatility;

            for (let i = 0; i < points; i++) {
                const change = (Math.random() - 0.5) * vol + trendBias[trend];
                value = Math.max(5, Math.min(95, value + change));
                data.push(value);
            }
            return data;
        }

        // Calculate change percentage
        function calculateChange(data) {
            if (data.length < 2) return 0;
            const first = data[0];
            const last = data[data.length - 1];
            return ((last - first) / first * 100).toFixed(1);
        }

        // Generate SVG path
        function generatePath(data, width, height, smooth = true, closed = false) {
            if (data.length === 0) return '';
            
            const padding = 2;
            const effectiveHeight = height - padding * 2;
            const effectiveWidth = width - padding * 2;
            const min = Math.min(...data);
            const max = Math.max(...data);
            const range = max - min || 1;

            const points = data.map((val, i) => ({
                x: padding + (i / (data.length - 1)) * effectiveWidth,
                y: padding + effectiveHeight - ((val - min) / range) * effectiveHeight
            }));

            if (smooth && points.length > 2) {
                let path = `M ${points[0].x} ${points[0].y}`;
                for (let i = 0; i < points.length - 1; i++) {
                    const p0 = points[i === 0 ? i : i - 1];
                    const p1 = points[i];
                    const p2 = points[i + 1];
                    const p3 = points[i + 2 >= points.length ? i + 1 : i + 2];

                    const cp1x = p1.x + (p2.x - p0.x) / 6;
                    const cp1y = p1.y + (p2.y - p0.y) / 6;
                    const cp2x = p2.x - (p3.x - p1.x) / 6;
                    const cp2y = p2.y - (p3.y - p1.y) / 6;

                    path += ` C ${cp1x} ${cp1y}, ${cp2x} ${cp2y}, ${p2.x} ${p2.y}`;
                }
                if (closed) {
                    path += ` L ${points[points.length - 1].x} ${height} L ${points[0].x} ${height} Z`;
                }
                return path;
            } else {
                let path = `M ${points[0].x} ${points[0].y}`;
                for (let i = 1; i < points.length; i++) {
                    path += ` L ${points[i].x} ${points[i].y}`;
                }
                if (closed) {
                    path += ` L ${points[points.length - 1].x} ${height} L ${points[0].x} ${height} Z`;
                }
                return path;
            }
        }

        // Create sparkline SVG
        function createSparklineSVG(data, width, height, color, options = {}) {
            const {
                type = 'line',
                thickness = 2,
                showEndDot = true,
                fillArea = true,
                smooth = true,
                animate = false,
                referenceLine = 'none'
            } = options;

            const padding = 2;
            const effectiveHeight = height - padding * 2;
            const effectiveWidth = width - padding * 2;
            const min = Math.min(...data);
            const max = Math.max(...data);
            const range = max - min || 1;
            const avg = data.reduce((a, b) => a + b, 0) / data.length;

            let svg = '';

            // Reference line
            if (referenceLine !== 'none') {
                let refValue;
                switch(referenceLine) {
                    case 'average': refValue = avg; break;
                    case 'min': refValue = min; break;
                    case 'max': refValue = max; break;
                    case 'zero': refValue = 0; break;
                }
                const refY = padding + effectiveHeight - ((refValue - min) / range) * effectiveHeight;
                svg += `<line x1="${padding}" y1="${refY}" x2="${width - padding}" y2="${refY}" 
                        stroke="rgba(255,255,255,0.2)" stroke-dasharray="4 2" stroke-width="1"/>`;
            }

            if (type === 'bar') {
                const barWidth = effectiveWidth / data.length * 0.7;
                const gap = effectiveWidth / data.length * 0.3;
                data.forEach((val, i) => {
                    const barHeight = ((val - min) / range) * effectiveHeight;
                    const x = padding + i * (barWidth + gap);
                    const y = height - padding - barHeight;
                    svg += `<rect class="sparkline-bar" x="${x}" y="${y}" width="${barWidth}" height="${barHeight}" 
                            fill="${color}" opacity="0.8"/>`;
                });
            } else if (type === 'dot') {
                const points = data.map((val, i) => ({
                    x: padding + (i / (data.length - 1)) * effectiveWidth,
                    y: padding + effectiveHeight - ((val - min) / range) * effectiveHeight
                }));
                points.forEach((p, i) => {
                    const opacity = 0.3 + (i / points.length) * 0.7;
                    svg += `<circle cx="${p.x}" cy="${p.y}" r="${thickness + 1}" fill="${color}" opacity="${opacity}"/>`;
                });
            } else {
                // Line or Area
                const linePath = generatePath(data, width, height, smooth, false);
                const areaPath = generatePath(data, width, height, smooth, true);

                if (fillArea && type === 'area') {
                    svg += `<path class="sparkline-area" d="${areaPath}" fill="${color}"/>`;
                }

                svg += `<path class="sparkline-line ${animate ? 'animate-line' : ''}" d="${linePath}" 
                        stroke="${color}" stroke-width="${thickness}" 
                        style="filter: drop-shadow(0 0 4px ${color});"/>`;

                if (showEndDot) {
                    const lastPoint = data.map((val, i) => ({
                        x: padding + (i / (data.length - 1)) * effectiveWidth,
                        y: padding + effectiveHeight - ((val - min) / range) * effectiveHeight
                    })).pop();
                    svg += `<circle class="sparkline-dot-last" cx="${lastPoint.x}" cy="${lastPoint.y}" 
                            r="${thickness + 2}" stroke="${color}"/>`;
                }
            }

            return svg;
        }

        // Render main sparkline
        function renderMainSparkline() {
            const width = mainSparkline.clientWidth || 500;
            const height = 100;
            
            const svg = createSparklineSVG(state.mainData, width, height, state.color, {
                type: state.type,
                thickness: state.lineThickness,
                showEndDot: state.showEndDot,
                fillArea: state.fillArea,
                smooth: state.smoothCurve,
                animate: state.animateDrawing,
                referenceLine: state.referenceLine
            });

            mainSparkline.innerHTML = svg;

            // Update main value display
            const change = calculateChange(state.mainData);
            const isPositive = parseFloat(change) >= 0;
            mainChange.className = `sparkline-change ${isPositive ? 'positive' : 'negative'}`;
            mainChange.innerHTML = `<span>${isPositive ? '↑' : '↓'}</span> ${isPositive ? '+' : ''}${change}% vs last period`;
            statusTrend.textContent = `${isPositive ? '+' : ''}${change}%`;
        }

        // Render sparkline cards
        function renderSparklineCards() {
            sparklineGrid.innerHTML = state.cardData.map((card, index) => {
                const change = calculateChange(card.data);
                const isPositive = parseFloat(change) >= 0;
                const changeClass = parseFloat(change) === 0 ? 'neutral' : (isPositive ? 'positive' : 'negative');
                const svg = createSparklineSVG(card.data, 150, state.chartHeight, state.color, {
                    type: state.type,
                    thickness: state.lineThickness,
                    showEndDot: state.showEndDot,
                    fillArea: state.fillArea,
                    smooth: state.smoothCurve,
                    animate: false,
                    referenceLine: 'none'
                });

                return `
                    <div class="sparkline-card">
                        <div class="sparkline-info">
                            <div class="sparkline-label">${card.label}</div>
                            <div class="sparkline-value">${card.value}</div>
                            <div class="sparkline-change ${changeClass}">
                                <span>${isPositive ? '↑' : parseFloat(change) === 0 ? '→' : '↓'}</span> 
                                ${isPositive ? '+' : ''}${change}%
                            </div>
                        </div>
                        <div class="sparkline-svg-container" style="height: ${state.chartHeight}px;">
                            <svg class="sparkline-svg" preserveAspectRatio="none">${svg}</svg>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Render inline sparklines
        function renderInlineSparklines() {
            const inlineData1 = generateData(10, 15, 'up');
            const inlineData2 = generateData(10, 10, 'flat');
            const inlineData3 = generateData(10, 25, 'down');

            document.getElementById('inlineSparkline1').innerHTML = `
                <svg viewBox="0 0 60 20" preserveAspectRatio="none">
                    ${createSparklineSVG(inlineData1, 60, 20, '#10b981', { type: 'line', thickness: 1.5, showEndDot: false, fillArea: false, smooth: true })}
                </svg>
            `;
            document.getElementById('inlineSparkline2').innerHTML = `
                <svg viewBox="0 0 60 20" preserveAspectRatio="none">
                    ${createSparklineSVG(inlineData2, 60, 20, '#ffbe0b', { type: 'line', thickness: 1.5, showEndDot: false, fillArea: false, smooth: true })}
                </svg>
            `;
            document.getElementById('inlineSparkline3').innerHTML = `
                <svg viewBox="0 0 60 20" preserveAspectRatio="none">
                    ${createSparklineSVG(inlineData3, 60, 20, '#00f2ea', { type: 'line', thickness: 1.5, showEndDot: false, fillArea: false, smooth: true })}
                </svg>
            `;
        }

        // Render presets
        function renderPresets() {
            presetsScroll.innerHTML = presets.map((preset, index) => {
                const previewData = generateData(8, 20, 'random');
                const svg = createSparklineSVG(previewData, 100, 30, preset.color, {
                    type: preset.type,
                    thickness: preset.thickness,
                    showEndDot: preset.showEndDot,
                    fillArea: preset.fillArea,
                    smooth: preset.smoothCurve
                });
                return `
                    <div class="preset-card" data-index="${index}">
                        <div class="preset-preview">
                            <svg viewBox="0 0 100 30" preserveAspectRatio="none" style="width: 100%; height: 100%;">
                                ${svg}
                            </svg>
                        </div>
                        <div class="preset-name">${preset.name}</div>
                    </div>
                `;
            }).join('');
        }

        // Render card data table
        function renderCardDataTable() {
            cardDataTable.innerHTML = state.cardData.map((card, index) => `
                <div class="data-row">
                    <span class="data-label">${card.label}</span>
                    <input type="text" class="data-input" data-index="${index}" value="${card.value}">
                </div>
            `).join('');

            // Add event listeners
            cardDataTable.querySelectorAll('.data-input').forEach(input => {
                input.addEventListener('change', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    state.cardData[index].value = e.target.value;
                    renderSparklineCards();
                });
            });
        }

        // Generate all data
        function generateAllData() {
            state.mainData = generateData(state.dataPoints, state.volatility, state.trendDirection);
            state.cardData.forEach(card => {
                card.data = generateData(state.dataPoints, state.volatility, state.trendDirection);
            });
        }

        // Update status
        function updateStatus() {
            statusType.textContent = state.type.charAt(0).toUpperCase() + state.type.slice(1);
            statusPoints.textContent = state.dataPoints;
            statusThickness.textContent = state.lineThickness + 'px';
        }

        // Render all
        function render() {
            renderMainSparkline();
            renderSparklineCards();
            updateStatus();
        }

        // Apply preset
        function applyPreset(index) {
            const preset = presets[index];
            state.type = preset.type;
            state.lineThickness = preset.thickness;
            state.showEndDot = preset.showEndDot;
            state.fillArea = preset.fillArea;
            state.smoothCurve = preset.smoothCurve;
            state.color = preset.color;

            // Update controls
            typeTabs.forEach(tab => tab.classList.toggle('active', tab.dataset.type === preset.type));
            lineThicknessSlider.value = preset.thickness;
            lineThicknessDisplay.textContent = preset.thickness + 'px';
            showEndDotToggle.checked = preset.showEndDot;
            fillAreaToggle.checked = preset.fillArea;
            smoothCurveToggle.checked = preset.smoothCurve;
            colorBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.color === preset.color));

            document.querySelectorAll('.preset-card').forEach((card, i) => {
                card.classList.toggle('active', i === index);
            });

            render();
        }

        // Event Listeners
        typeTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                typeTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                state.type = tab.dataset.type;
                render();
            });
        });

        lineThicknessSlider.addEventListener('input', (e) => {
            state.lineThickness = parseInt(e.target.value);
            lineThicknessDisplay.textContent = state.lineThickness + 'px';
            render();
        });

        chartHeightSlider.addEventListener('input', (e) => {
            state.chartHeight = parseInt(e.target.value);
            chartHeightDisplay.textContent = state.chartHeight + 'px';
            render();
        });

        colorBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                colorBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                state.color = btn.dataset.color;
                render();
            });
        });

        showEndDotToggle.addEventListener('change', (e) => {
            state.showEndDot = e.target.checked;
            render();
        });

        fillAreaToggle.addEventListener('change', (e) => {
            state.fillArea = e.target.checked;
            render();
        });

        smoothCurveToggle.addEventListener('change', (e) => {
            state.smoothCurve = e.target.checked;
            render();
        });

        animateDrawingToggle.addEventListener('change', (e) => {
            state.animateDrawing = e.target.checked;
            render();
        });

        referenceLineSelect.addEventListener('change', (e) => {
            state.referenceLine = e.target.value;
            render();
        });

        dataPointsSlider.addEventListener('input', (e) => {
            state.dataPoints = parseInt(e.target.value);
            dataPointsDisplay.textContent = state.dataPoints;
            generateAllData();
            render();
        });

        volatilitySlider.addEventListener('input', (e) => {
            state.volatility = parseInt(e.target.value);
            volatilityDisplay.textContent = state.volatility + '%';
            generateAllData();
            render();
        });

        trendDirectionSelect.addEventListener('change', (e) => {
            state.trendDirection = e.target.value;
            generateAllData();
            render();
        });

        regenerateBtn.addEventListener('click', () => {
            generateAllData();
            render();
            renderInlineSparklines();
        });

        resetBtn.addEventListener('click', () => {
            state.type = 'line';
            state.lineThickness = 2;
            state.chartHeight = 50;
            state.color = '#00f2ea';
            state.showEndDot = true;
            state.fillArea = true;
            state.smoothCurve = true;
            state.animateDrawing = true;
            state.referenceLine = 'none';
            state.dataPoints = 12;
            state.volatility = 20;
            state.trendDirection = 'random';

            typeTabs.forEach(tab => tab.classList.toggle('active', tab.dataset.type === 'line'));
            lineThicknessSlider.value = 2;
            lineThicknessDisplay.textContent = '2px';
            chartHeightSlider.value = 50;
            chartHeightDisplay.textContent = '50px';
            colorBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.color === '#00f2ea'));
            showEndDotToggle.checked = true;
            fillAreaToggle.checked = true;
            smoothCurveToggle.checked = true;
            animateDrawingToggle.checked = true;
            referenceLineSelect.value = 'none';
            dataPointsSlider.value = 12;
            dataPointsDisplay.textContent = '12';
            volatilitySlider.value = 20;
            volatilityDisplay.textContent = '20%';
            trendDirectionSelect.value = 'random';

            document.querySelectorAll('.preset-card').forEach(card => card.classList.remove('active'));

            generateAllData();
            render();
            renderInlineSparklines();
        });

        presetsScroll.addEventListener('click', (e) => {
            const card = e.target.closest('.preset-card');
            if (card) {
                applyPreset(parseInt(card.dataset.index));
            }
        });

        // Window resize handler
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(render, 100);
        });

        // Initialize
        generateAllData();
        renderPresets();
        renderCardDataTable();
        render();
        renderInlineSparklines();
    </script>
</body>
</html>
